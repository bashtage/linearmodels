

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Using formulas to specify models &#8212; linearmodels 4.1 documentation</title>
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Module Reference" href="../reference.html" />
    <link rel="prev" title="Further Examples" href="advanced-examples.html" />
  
  
   

  <link rel="stylesheet" href="../../_static/css/overrides.css" type="text/css" />

  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../reference.html" title="Module Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="advanced-examples.html" title="Further Examples"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">linearmodels 4.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Instrumental Variable Estimation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
        <a href="
    ../../index.html" class="text-logo">linearmodels 4.1</a>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Instrumental Variable Estimation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic-examples.html">Basic Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced-examples.html">Further Examples</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using formulas to specify models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference.html">Module Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mathematical-formula.html">Formulas and Mathematical Detail</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../panel/index.html">Panel Data Model Estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../asset-pricing/index.html">Linear Factor Models for Asset Pricing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../system/index.html">System Regression Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utility.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plan.html">Module Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">References</a></li>
</ul>

    
  </div>
</div>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../../index.html">Docs</a></li>
              
                <li><a href="../index.html">Instrumental Variable Estimation</a></li>
              
              <li>Using formulas to specify models</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="section" id="Using-formulas-to-specify-models">
<h1>Using formulas to specify models<a class="headerlink" href="#Using-formulas-to-specify-models" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Basic-Usage">
<h2>Basic Usage<a class="headerlink" href="#Basic-Usage" title="Permalink to this headline">¶</a></h2>
<p>Formulas provide an alternative method to specify a model. The formulas
used here utilize <a class="reference external" href="http://patsy.readthedocs.io/en/latest/">patsy</a> are
similar to those in <a class="reference external" href="http://www.statsmodels.org">statsmodels</a>,
although they use an enhanced syntax to allow identification of
endogenous regressors. The basis formula syntax for a single variable
regression would be</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">~</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">x</span>
</pre></div>
</div>
<p>where the <code class="docutils literal"><span class="pre">1</span></code> indicates that a constant should be included and <code class="docutils literal"><span class="pre">x</span></code>
is the regressor. In the context of an instrumental variables model, it
is necessary to mark variables as endogenous and to provide a list of
instruments that are included only in the model for the endogenous
variables. In a basic single regressor model, this would be specified
using <code class="docutils literal"><span class="pre">[]</span></code> to surround an inner model.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">~</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">[</span><span class="n">x</span> <span class="o">~</span> <span class="n">z</span><span class="p">]</span>
</pre></div>
</div>
<p>In this expression, <code class="docutils literal"><span class="pre">x</span></code> is now marked as endogenous and <code class="docutils literal"><span class="pre">z</span></code> is an
instrument. Any exogenous variable will automatically be used when
instrumenting <code class="docutils literal"><span class="pre">x</span></code> so there is no need to repeat these here (in this
example, the “first stage” would include a constant and z).</p>
</div>
<div class="section" id="Multiple-Endogenous-Variables">
<h2>Multiple Endogenous Variables<a class="headerlink" href="#Multiple-Endogenous-Variables" title="Permalink to this headline">¶</a></h2>
<p>Multiple endogenous variables are specified in a similar manner. The
basic concept is that any model can be expressed as</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dep</span> <span class="o">~</span> <span class="n">exog</span> <span class="o">+</span> <span class="p">[</span> <span class="n">endog</span> <span class="o">~</span> <span class="n">instruments</span><span class="p">]</span>
</pre></div>
</div>
<p>and it must be the case that</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dep</span> <span class="o">~</span> <span class="n">exog</span> <span class="o">+</span> <span class="n">endog</span>
</pre></div>
</div>
<p>and</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dep</span> <span class="o">~</span> <span class="n">exog</span> <span class="o">+</span> <span class="n">instruments</span>
</pre></div>
</div>
<p>are valid patsy formulas. This means that multiple endogenous regressors
or instruments should be joined with <code class="docutils literal"><span class="pre">+</span></code>, but that the first
endogenous or first instrument should not have a leading <code class="docutils literal"><span class="pre">+</span></code>. A simple
example with 2 endogenous variables and 3 instruments would be</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">~</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">x3</span>  <span class="o">+</span> <span class="p">[</span> <span class="n">x4</span> <span class="o">+</span> <span class="n">x5</span> <span class="o">~</span> <span class="n">z1</span> <span class="o">+</span> <span class="n">z2</span> <span class="o">+</span> <span class="n">z3</span><span class="p">]</span>
</pre></div>
</div>
<p>In this example, the “submodels” <code class="docutils literal"><span class="pre">y</span> <span class="pre">~</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">x1</span> <span class="pre">+</span> <span class="pre">x2</span> <span class="pre">+x3</span> <span class="pre">+</span> <span class="pre">x4</span> <span class="pre">+</span> <span class="pre">x5</span></code> and
<code class="docutils literal"><span class="pre">y</span> <span class="pre">~</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">x1</span> <span class="pre">+</span> <span class="pre">x2</span> <span class="pre">+</span> <span class="pre">x3</span> <span class="pre">+</span> <span class="pre">z1</span> <span class="pre">+</span> <span class="pre">z2</span> <span class="pre">+z3</span></code> are both valid patsy expressions.</p>
</div>
<div class="section" id="Standard-patsy">
<h2>Standard patsy<a class="headerlink" href="#Standard-patsy" title="Permalink to this headline">¶</a></h2>
<p>Aside from this change, the standard rules of patsy apply, and so it is
possible to use mathematical expression or other patsy-specific
features. See the <a class="reference external" href="http://patsy.readthedocs.io/en/latest/quickstart.html">patsy
quickstart</a>
for some examples of what is possible.</p>
</div>
<div class="section" id="MEPS-data">
<h2>MEPS data<a class="headerlink" href="#MEPS-data" title="Permalink to this headline">¶</a></h2>
<p>This example shows the use of formulas to estimate both IV and OLS
models using the <a class="reference external" href="https://meps.ahrq.gov">medical expenditure panel
survey</a>. The model measures the effect of
various characteristics on the log of drug expenditure and instruments
the variable that measures where a subject was insured through a union
with their social security to income ratio.</p>
<p>This first block imports the data and numpy.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">linearmodels.iv</span> <span class="kn">import</span> <span class="n">IV2SLS</span>
<span class="kn">from</span> <span class="nn">linearmodels.datasets</span> <span class="kn">import</span> <span class="n">meps</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">meps</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">meps</span><span class="o">.</span><span class="n">DESCR</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

age               Age
age2              Age-squared
black             Black
blhisp            Black or Hispanic
drugexp           Presc-drugs expense
educyr            Years of education
fair              Fair health
female            Female
firmsz            Firm size
fph               fair or poor health
good              Good health
hi_empunion       Insured thro emp/union
hisp              Hiapanic
income            Income
ldrugexp          log(drugexp)
linc              log(income)
lowincome         Low income
marry             Married
midincome         Middle income
msa               Metropolitan stat area
multlc            Multiple locations
poor              Poor health
poverty           Poor
priolist          Priority list cond
private           Private insurance
ssiratio          SSI/Income ratio
totchr            Total chronic cond
vegood            V-good health
vgh               vg or good health

</pre></div></div>
</div>
<div class="section" id="Estimating-a-model-with-a-formula">
<h3>Estimating a model with a formula<a class="headerlink" href="#Estimating-a-model-with-a-formula" title="Permalink to this headline">¶</a></h3>
<p>This model uses a formula which is input using the <code class="docutils literal"><span class="pre">from_formula</span></code>
interface. Unlike direct initialization, this interface takes the
formula and a DataFrame containing the data necessary to evaluate the
formula.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">formula</span> <span class="o">=</span> <span class="s1">&#39;ldrugexp ~ 1 + totchr + female + age + linc + blhisp + [hi_empunion ~ ssiratio]&#39;</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="o">.</span><span class="n">from_formula</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">iv_res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s1">&#39;robust&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">iv_res</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                          IV-2SLS Estimation Summary
==============================================================================
Dep. Variable:               ldrugexp   R-squared:                      0.0640
Estimator:                    IV-2SLS   Adj. R-squared:                 0.0634
No. Observations:               10089   F-statistic:                    2000.9
Date:                Sat, Nov 18 2017   P-value (F-stat)                0.0000
Time:                        12:42:54   Distribution:                  chi2(6)
Cov. Estimator:                robust

                              Parameter Estimates
===============================================================================
             Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
-------------------------------------------------------------------------------
Intercept       6.7872     0.2688     25.246     0.0000      6.2602      7.3141
totchr          0.4503     0.0102     44.157     0.0000      0.4303      0.4703
female         -0.0204     0.0326    -0.6257     0.5315     -0.0843      0.0435
age            -0.0132     0.0030    -4.4092     0.0000     -0.0191     -0.0073
linc            0.0870     0.0226     3.8436     0.0001      0.0426      0.1314
blhisp         -0.2174     0.0395    -5.5052     0.0000     -0.2948     -0.1400
hi_empunion    -0.8976     0.2211    -4.0592     0.0000     -1.3310     -0.4642
===============================================================================

Endogenous: hi_empunion
Instruments: ssiratio
Robust Covariance (Heteroskedastic)
Debiased: False
</pre></div></div>
</div>
</div>
<div class="section" id="Mathematical-expression-in-formulas">
<h3>Mathematical expression in formulas<a class="headerlink" href="#Mathematical-expression-in-formulas" title="Permalink to this headline">¶</a></h3>
<p>Standard patsy expression, such as using mathematical expressions, can
be readily used.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">formula</span> <span class="o">=</span> <span class="s1">&#39;np.log(drugexp) ~ 1 + totchr + age + linc + blhisp + [hi_empunion ~ ssiratio]&#39;</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="o">.</span><span class="n">from_formula</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">iv_res2</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s1">&#39;robust&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="OLS">
<h3>OLS<a class="headerlink" href="#OLS" title="Permalink to this headline">¶</a></h3>
<p>Omitting the block that marks a variable as endogenous will produce OLS
– just like using <code class="docutils literal"><span class="pre">None</span></code> for both <code class="docutils literal"><span class="pre">endog</span></code> and <code class="docutils literal"><span class="pre">instruments</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">formula</span> <span class="o">=</span> <span class="s1">&#39;ldrugexp ~ 1 + totchr + female + age + linc + blhisp + hi_empunion&#39;</span>
<span class="n">ols</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="o">.</span><span class="n">from_formula</span><span class="p">(</span><span class="n">formula</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">ols_res</span> <span class="o">=</span> <span class="n">ols</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s1">&#39;robust&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ols_res</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                            OLS Estimation Summary
==============================================================================
Dep. Variable:               ldrugexp   R-squared:                      0.1770
Estimator:                        OLS   Adj. R-squared:                 0.1765
No. Observations:               10089   F-statistic:                    2262.6
Date:                Sat, Nov 18 2017   P-value (F-stat)                0.0000
Time:                        12:42:54   Distribution:                  chi2(6)
Cov. Estimator:                robust

                              Parameter Estimates
===============================================================================
             Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
-------------------------------------------------------------------------------
Intercept       5.8611     0.1570     37.320     0.0000      5.5533      6.1689
totchr          0.4404     0.0094     47.049     0.0000      0.4220      0.4587
female          0.0578     0.0254     2.2797     0.0226      0.0081      0.1075
age            -0.0035     0.0019    -1.8228     0.0683     -0.0073      0.0003
linc            0.0105     0.0137     0.7646     0.4445     -0.0164      0.0373
blhisp         -0.1513     0.0341    -4.4353     0.0000     -0.2182     -0.0844
hi_empunion     0.0739     0.0260     2.8441     0.0045      0.0230      0.1248
===============================================================================
</pre></div></div>
</div>
</div>
<div class="section" id="Comparing-results">
<h3>Comparing results<a class="headerlink" href="#Comparing-results" title="Permalink to this headline">¶</a></h3>
<p>The function <code class="docutils literal"><span class="pre">compare</span></code> can be used to compare the result of multiple
models. Here dropping <code class="docutils literal"><span class="pre">female</span></code> from the IV regression improves the
<span class="math">\(R^2\)</span>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">linearmodels.iv</span> <span class="kn">import</span> <span class="n">compare</span>
<span class="k">print</span><span class="p">(</span><span class="n">compare</span><span class="p">({</span><span class="s1">&#39;IV&#39;</span><span class="p">:</span><span class="n">iv_res</span><span class="p">,</span> <span class="s1">&#39;OLS&#39;</span><span class="p">:</span><span class="n">ols_res</span><span class="p">,</span> <span class="s1">&#39;IV-formula&#39;</span><span class="p">:</span> <span class="n">iv_res2</span><span class="p">}))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                          Model Comparison
====================================================================
                                IV          IV-formula           OLS
--------------------------------------------------------------------
Dep. Variable             ldrugexp     np.log(drugexp)      ldrugexp
Estimator                  IV-2SLS             IV-2SLS           OLS
No. Observations             10089               10089         10089
Cov. Est.                   robust              robust        robust
R-squared                   0.0640              0.0659        0.1770
Adj. R-squared              0.0634              0.0654        0.1765
F-statistic                 2000.9              2004.3        2262.6
P-value (F-stat)            0.0000              0.0000        0.0000
==================     ===========   =================   ===========
Intercept                   6.7872              6.7709        5.8611
                          (25.246)            (26.353)      (37.320)
age                        -0.0132             -0.0132       -0.0035
                         (-4.4092)           (-4.4237)     (-1.8228)
blhisp                     -0.2174             -0.2168       -0.1513
                         (-5.5052)           (-5.5252)     (-4.4353)
female                     -0.0204                            0.0578
                         (-0.6257)                          (2.2797)
hi_empunion                -0.8976             -0.8892        0.0739
                         (-4.0592)           (-4.1653)      (2.8441)
linc                        0.0870              0.0873        0.0105
                          (3.8436)            (3.8348)      (0.7646)
totchr                      0.4503              0.4498        0.4404
                          (44.157)            (44.453)      (47.049)
==================== ============= =================== =============
Instruments               ssiratio            ssiratio
--------------------------------------------------------------------

T-stats reported in parentheses
</pre></div></div>
</div>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="advanced-examples.html" title="previous chapter (use the left arrow)">Further Examples</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="../reference.html" title="next chapter (use the right arrow)">Module Reference</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../reference.html" title="Module Reference"
             >next</a> |</li>
        <li class="right" >
          <a href="advanced-examples.html" title="Further Examples"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">linearmodels 4.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Instrumental Variable Estimation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2017, Kevin Sheppard. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>