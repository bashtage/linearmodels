<!DOCTYPE html> <html lang=en > <meta charset=utf-8  /> <meta name=viewport  content="width=device-width, initial-scale=1.0" /><meta name=generator  content="Docutils 0.19: https://docutils.sourceforge.io/" /> <meta name=viewport  content="width=device-width,initial-scale=1"> <meta http-equiv=x-ua-compatible  content="ie=edge"> <meta name="lang:clipboard.copy" content="Copy to clipboard"> <meta name="lang:clipboard.copied" content="Copied to clipboard"> <meta name="lang:search.language" content=en > <meta name="lang:search.pipeline.stopwords" content=True > <meta name="lang:search.pipeline.trimmer" content=True > <meta name="lang:search.result.none" content="No matching documents"> <meta name="lang:search.result.one" content="1 matching document"> <meta name="lang:search.result.other" content="# matching documents"> <meta name="lang:search.tokenizer" content="[\s\-]+"> <link href="https://fonts.gstatic.com/" rel=preconnect  crossorigin> <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel=stylesheet > <style> body, input { font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif } code, kbd, pre { font-family: "Roboto Mono", "Courier New", Courier, monospace } </style> <link rel=stylesheet  href="../../_static/stylesheets/application.css"/> <link rel=stylesheet  href="../../_static/stylesheets/application-palette.css"/> <link rel=stylesheet  href="../../_static/stylesheets/application-fixes.css"/> <link rel=stylesheet  href="../../_static/fonts/material-icons.css"/> <meta name=theme-color  content="#2196f3"> <script src="../../_static/javascripts/modernizr.js"></script> <title>Examples &#8212; linearmodels 4.28.dev53+gf83d8d9f7 documentation</title> <link rel=apple-touch-icon  sizes=180x180  href="../../_static/icons/apple-touch-icon.png"> <link rel=icon  type="image/png" sizes=32x32  href="../../_static/icons/favicon-32x32.png"> <link rel=icon  type="image/png" sizes=16x16  href="../../_static/icons/favicon-16x16.png"> <link rel=manifest  href="../../_static/icons/site.webmanifest"> <link rel=mask-icon  href="../../_static/icons/safari-pinned-tab.svg" color="#2196f3"> <link rel="shortcut icon" href="../../_static/icons/favicon.ico"> <meta name=msapplication-TileColor  content="#f8f8f8"> <meta name=msapplication-config  content="../../_static/icons/browserconfig.xml"> <style> .highlight { background-color: hsla(0,0%,92.5%,.5) !important; } </style> <link rel=stylesheet  type="text/css" href="../../_static/pygments.css" /> <link rel=stylesheet  type="text/css" href="../../_static/material.css" /> <script data-url_root="../../" id=documentation_options  src="../../_static/documentation_options.js"></script> <script src="../../_static/jquery.js"></script> <script src="../../_static/underscore.js"></script> <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script> <script src="../../_static/doctools.js"></script> <script src="../../_static/sphinx_highlight.js"></script> <script crossorigin=anonymous  integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script> <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script> <script defer=defer  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <link rel="shortcut icon" href="../../_static/favicon.ico"/> <link rel=index  title=Index  href="../../genindex.html" /> <link rel=search  title=Search  href="../../search.html" /> <link rel=next  title="Using formulas to specify models" href=using-formulas.html  /> <link rel=prev  title="Data Formats for Panel Data Analysis" href=data-formats.html  /> <body dir=ltr data-md-color-primary=blue data-md-color-accent=orange> <svg class=md-svg > <defs data-children-count=0 > <svg xmlns="http://www.w3.org/2000/svg" width=416  height=448  viewBox="0 0 416 448" id=__github ><path fill=currentColor  d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle  data-md-toggle=drawer  type=checkbox  id=__drawer > <input class=md-toggle  data-md-toggle=search  type=checkbox  id=__search > <label class=md-overlay  data-md-component=overlay  for=__drawer ></label> <a href="#panel/examples/examples" tabindex=1  class=md-skip > Skip to content </a> <header class=md-header  data-md-component=header > <nav class="md-header-nav md-grid"> <div class="md-flex navheader"> <div class="md-flex__cell md-flex__cell--shrink"> <a href="../../index.html" title="linearmodels 4.28.dev53+gf83d8d9f7 documentation" class="md-header-nav__button md-logo"> <img src="../../_static/bw-logo.svg" height=26  alt="linearmodels 4.28.dev53+gf83d8d9f7 documentation logo"> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer ></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title > <span class=md-header-nav__topic >linearmodels v4.28 (+53)</span> <span class=md-header-nav__topic > Examples </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search ></label> <div class=md-search  data-md-component=search  role=dialog > <label class=md-search__overlay  for=__search ></label> <div class=md-search__inner  role=search > <form class=md-search__form  action="../../search.html" method=get  name=search > <input type=text  class=md-search__input  name=q  placeholder=Search  autocapitalize=off  autocomplete=off  spellcheck=false  data-md-component=query  data-md-state=active > <label class="md-icon md-search__icon" for=__search ></label> <button type=reset  class="md-icon md-search__icon" data-md-component=reset  tabindex=-1 > &#xE5CD; </button> </form> <div class=md-search__output > <div class=md-search__scrollwrap  data-md-scrollfix> <div class=md-search-result  data-md-component=result > <div class=md-search-result__meta > Type to start searching </div> <ol class=md-search-result__list ></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source > <a href="https://github.com/bashtage/linearmodels/" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > linearmodels </div> </a> </div> </div> <div class="md-flex__cell md-flex__cell--shrink dropdown"> <button class=dropdownbutton >Versions</button> <div class="dropdown-content md-hero"> <a title=Release  href="https://bashtage.github.io/linearmodels/">Release</a> <a title=Development  href="https://bashtage.github.io/linearmodels/devel/">Development</a> </div> </div> </div> </nav> </header> <div class=md-container > <nav class=md-tabs  data-md-component=tabs > <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list > <li class=md-tabs__item ><a href="../index.html" class=md-tabs__link >Panel Data Model Estimation</a> </ul> </div> </nav> <main class=md-main > <div class="md-main__inner md-grid" data-md-component=container > <div class="md-sidebar md-sidebar--primary" data-md-component=navigation > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--primary" data-md-level=0 > <label class="md-nav__title md-nav__title--site" for=__drawer > <a href="../../index.html" title="linearmodels 4.28.dev53+gf83d8d9f7 documentation" class="md-nav__button md-logo"> <img src="../../_static/bw-logo.svg" alt=" logo" width=48  height=48 > </a> <a href="../../index.html" title="linearmodels 4.28.dev53+gf83d8d9f7 documentation">linearmodels v4.28 (+53)</a> </label> <div class=md-nav__source > <a href="https://github.com/bashtage/linearmodels/" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > linearmodels </div> </a> </div> <ul class=md-nav__list > <li class=md-nav__item > <a href="../../iv/index.html" class=md-nav__link >Instrumental Variable Estimation</a> <li class=md-nav__item > <a href="../index.html" class=md-nav__link >Panel Data Model Estimation</a> <ul class=md-nav__list > <li class=md-nav__item > <a href="../introduction.html" class=md-nav__link >Introduction</a> <li class=md-nav__item > <a href=data-formats.html  class=md-nav__link >Data Formats for Panel Data Analysis</a> <li class=md-nav__item > <input class="md-toggle md-nav__toggle" data-md-toggle=toc  type=checkbox  id=__toc > <label class="md-nav__link md-nav__link--active" for=__toc > Examples </label> <a href="#" class="md-nav__link md-nav__link--active">Examples</a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >Contents</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#panel-examples-examples--page-root" class=md-nav__link >Examples</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Loading-data" class=md-nav__link >Loading data</a> <li class=md-nav__item ><a href="#Basic-regression-on-panel-data" class=md-nav__link >Basic regression on panel data</a> <li class=md-nav__item ><a href="#Estimating-parameters-with-uncorrelated-effects" class=md-nav__link >Estimating parameters with uncorrelated effects</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Random-effects" class=md-nav__link >Random effects</a> <li class=md-nav__item ><a href="#The-between-estimator" class=md-nav__link >The between estimator</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Other-options" class=md-nav__link >Other options</a> </ul> </nav> </ul> </nav> <li class=md-nav__item ><a href="#Handling-correlated-effects" class=md-nav__link >Handling correlated effects</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Including-fixed-effects" class=md-nav__link >Including fixed effects</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Time-invariant-Variables" class=md-nav__link >Time-invariant Variables</a> </ul> </nav> <li class=md-nav__item ><a href="#Time-Effects" class=md-nav__link >Time Effects</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Effects-vs-Dummies" class=md-nav__link >Effects vs Dummies</a> <li class=md-nav__item ><a href="#Other-Options" class=md-nav__link >Other Options</a> </ul> </nav> <li class=md-nav__item ><a href="#Other-Effects" class=md-nav__link >Other Effects</a> <li class=md-nav__item ><a href="#Using-first-differences" class=md-nav__link >Using first differences</a> </ul> </nav> <li class=md-nav__item ><a href="#Comparing-models" class=md-nav__link >Comparing models</a> <li class=md-nav__item ><a href="#Covariance-options" class=md-nav__link >Covariance options</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Heteroskedasticity-Robust-Covariance" class=md-nav__link >Heteroskedasticity Robust Covariance</a> <li class=md-nav__item ><a href="#Clustered-by-Entity" class=md-nav__link >Clustered by Entity</a> <li class=md-nav__item ><a href="#Other-clusters" class=md-nav__link >Other clusters</a> </ul> </nav> </ul> </nav> <li class=md-nav__item ><a class=md-nav__extra_link  href="../../_sources/panel/examples/examples.ipynb.txt">Show Source</a> </ul> </nav> <li class=md-nav__item > <a href=using-formulas.html  class=md-nav__link >Using formulas to specify models</a> <li class=md-nav__item > <a href="../pandas.html" class=md-nav__link >Comparison with pandas PanelOLS and FamaMacBeth</a> <li class=md-nav__item > <a href="../reference.html" class=md-nav__link >Module Reference</a> <li class=md-nav__item > <a href="../mathematical-formula.html" class=md-nav__link >Formulas and Mathematical Detail</a> <li class=md-nav__item > <a href="../faq.html" class=md-nav__link >Implementation Choices</a> </ul> <li class=md-nav__item > <a href="../../asset-pricing/index.html" class=md-nav__link >Linear Factor Models for Asset Pricing</a> <li class=md-nav__item > <a href="../../system/index.html" class=md-nav__link >System Regression Models</a> <li class=md-nav__item > <a href="../../utility.html" class=md-nav__link >Utilities</a> <li class=md-nav__item > <a href="../../compatibility.html" class=md-nav__link >Compatibility</a> <li class=md-nav__item > <a href="../../plan.html" class=md-nav__link >Module Plans</a> <li class=md-nav__item > <a href="../../contributing.html" class=md-nav__link >Contributing</a> <li class=md-nav__item > <a href="../../changes.html" class=md-nav__link >Change Log</a> <li class=md-nav__item > <a href="../../references.html" class=md-nav__link >References</a> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >Contents</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#panel-examples-examples--page-root" class=md-nav__link >Examples</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Loading-data" class=md-nav__link >Loading data</a> <li class=md-nav__item ><a href="#Basic-regression-on-panel-data" class=md-nav__link >Basic regression on panel data</a> <li class=md-nav__item ><a href="#Estimating-parameters-with-uncorrelated-effects" class=md-nav__link >Estimating parameters with uncorrelated effects</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Random-effects" class=md-nav__link >Random effects</a> <li class=md-nav__item ><a href="#The-between-estimator" class=md-nav__link >The between estimator</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Other-options" class=md-nav__link >Other options</a> </ul> </nav> </ul> </nav> <li class=md-nav__item ><a href="#Handling-correlated-effects" class=md-nav__link >Handling correlated effects</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Including-fixed-effects" class=md-nav__link >Including fixed effects</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Time-invariant-Variables" class=md-nav__link >Time-invariant Variables</a> </ul> </nav> <li class=md-nav__item ><a href="#Time-Effects" class=md-nav__link >Time Effects</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Effects-vs-Dummies" class=md-nav__link >Effects vs Dummies</a> <li class=md-nav__item ><a href="#Other-Options" class=md-nav__link >Other Options</a> </ul> </nav> <li class=md-nav__item ><a href="#Other-Effects" class=md-nav__link >Other Effects</a> <li class=md-nav__item ><a href="#Using-first-differences" class=md-nav__link >Using first differences</a> </ul> </nav> <li class=md-nav__item ><a href="#Comparing-models" class=md-nav__link >Comparing models</a> <li class=md-nav__item ><a href="#Covariance-options" class=md-nav__link >Covariance options</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Heteroskedasticity-Robust-Covariance" class=md-nav__link >Heteroskedasticity Robust Covariance</a> <li class=md-nav__item ><a href="#Clustered-by-Entity" class=md-nav__link >Clustered by Entity</a> <li class=md-nav__item ><a href="#Other-clusters" class=md-nav__link >Other clusters</a> </ul> </nav> </ul> </nav> <li class=md-nav__item ><a class=md-nav__extra_link  href="../../_sources/panel/examples/examples.ipynb.txt">Show Source</a> <li id=searchbox  class=md-nav__item > </ul> </nav> </div> </div> </div> <div class=md-content > <article class="md-content__inner md-typeset" role=main > <style> /* CSS for nbsphinx extension */ /* remove conflicting styling from Sphinx themes */ div.nbinput.container div.prompt *, div.nboutput.container div.prompt *, div.nbinput.container div.input_area pre, div.nboutput.container div.output_area pre, div.nbinput.container div.input_area .highlight, div.nboutput.container div.output_area .highlight { border: none; padding: 0; margin: 0; box-shadow: none; } div.nbinput.container > div[class*=highlight], div.nboutput.container > div[class*=highlight] { margin: 0; } div.nbinput.container div.prompt *, div.nboutput.container div.prompt * { background: none; } div.nboutput.container div.output_area .highlight, div.nboutput.container div.output_area pre { background: unset; } div.nboutput.container div.output_area div.highlight { color: unset; /* override Pygments text color */ } /* avoid gaps between output lines */ div.nboutput.container div[class*=highlight] pre { line-height: normal; } /* input/output containers */ div.nbinput.container, div.nboutput.container { display: -webkit-flex; display: flex; align-items: flex-start; margin: 0; width: 100%; } @media (max-width: 540px) { div.nbinput.container, div.nboutput.container { flex-direction: column; } } /* input container */ div.nbinput.container { padding-top: 5px; } /* last container */ div.nblast.container { padding-bottom: 5px; } /* input prompt */ div.nbinput.container div.prompt pre { color: #307FC1; } /* output prompt */ div.nboutput.container div.prompt pre { color: #BF5B3D; } /* all prompts */ div.nbinput.container div.prompt, div.nboutput.container div.prompt { width: 4.5ex; padding-top: 5px; position: relative; user-select: none; } div.nbinput.container div.prompt > div, div.nboutput.container div.prompt > div { position: absolute; right: 0; margin-right: 0.3ex; } @media (max-width: 540px) { div.nbinput.container div.prompt, div.nboutput.container div.prompt { width: unset; text-align: left; padding: 0.4em; } div.nboutput.container div.prompt.empty { padding: 0; } div.nbinput.container div.prompt > div, div.nboutput.container div.prompt > div { position: unset; } } /* disable scrollbars on prompts */ div.nbinput.container div.prompt pre, div.nboutput.container div.prompt pre { overflow: hidden; } /* input/output area */ div.nbinput.container div.input_area, div.nboutput.container div.output_area { -webkit-flex: 1; flex: 1; overflow: auto; } @media (max-width: 540px) { div.nbinput.container div.input_area, div.nboutput.container div.output_area { width: 100%; } } /* input area */ div.nbinput.container div.input_area { border: 1px solid #e0e0e0; border-radius: 2px; /*background: #f5f5f5;*/ } /* override MathJax center alignment in output cells */ div.nboutput.container div[class*=MathJax] { text-align: left !important; } /* override sphinx.ext.imgmath center alignment in output cells */ div.nboutput.container div.math p { text-align: left; } /* standard error */ div.nboutput.container div.output_area.stderr { background: #fdd; } /* ANSI colors */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } div.nbinput.container div.input_area div[class*=highlight] > pre, div.nboutput.container div.output_area div[class*=highlight] > pre, div.nboutput.container div.output_area div[class*=highlight].math, div.nboutput.container div.output_area.rendered_html, div.nboutput.container div.output_area > div.output_javascript, div.nboutput.container div.output_area:not(.rendered_html) > img{ padding: 5px; margin: 0; } /* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */ div.nbinput.container div.input_area > div[class^='highlight'], div.nboutput.container div.output_area > div[class^='highlight']{ overflow-y: hidden; } /* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */ .prompt .copybtn { display: none; } /* Some additional styling taken form the Jupyter notebook CSS */ .jp-RenderedHTMLCommon table, div.rendered_html table { border: none; border-collapse: collapse; border-spacing: 0; color: black; font-size: 12px; table-layout: fixed; } .jp-RenderedHTMLCommon thead, div.rendered_html thead { border-bottom: 1px solid black; vertical-align: bottom; } .jp-RenderedHTMLCommon tr, .jp-RenderedHTMLCommon th, .jp-RenderedHTMLCommon td, div.rendered_html tr, div.rendered_html th, div.rendered_html td { text-align: right; vertical-align: middle; padding: 0.5em 0.5em; line-height: normal; white-space: normal; max-width: none; border: none; } .jp-RenderedHTMLCommon th, div.rendered_html th { font-weight: bold; } .jp-RenderedHTMLCommon tbody tr:nth-child(odd), div.rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .jp-RenderedHTMLCommon tbody tr:hover, div.rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } </style> <section id=Examples > <h1 id=panel-examples-examples--page-root >Examples<a class=headerlink  href="#panel-examples-examples--page-root" title="Permalink to this heading">¶</a></h1> <p>These examples cover the models available for estimating panel models. The initial examples all ignore covariance options and so use the default classic covariance which is appropriate for homoskedastic data. The alternative covariance options are described at the end of this document.</p> <section id=Loading-data > <h2 id=Loading-data >Loading data<a class=headerlink  href="#Loading-data" title="Permalink to this heading">¶</a></h2> <p>These examples all make use of the wage panel from</p> <ol class="upperalpha simple" start=6 > <li><p>Vella and M. Verbeek (1998), “Whose Wages Do Unions Raise? A Dynamic Model of Unionism and Wage Rate Determination for Young Men,” <em>Journal of Applied Econometrics</em> 13, 163-183.</p> </ol> <p>The data set consists of wages and characteristics for men during the 1980s. The entity identifier is <code class="docutils literal notranslate"><span class=pre >nr</span></code> and the time identified is <code class="docutils literal notranslate"><span class=pre >year</span></code>. This data is used extensively in Chapter 14 of <em>Introduction to Econometrics</em> by Jeffrey Wooldridge.</p> <p>Here a <code class="docutils literal notranslate"><span class=pre >MultiIndex</span></code> <code class="docutils literal notranslate"><span class=pre >DataFrame</span></code> is used to hold the data in a format that can be understood as a panel. Before setting the index, a year <code class="docutils literal notranslate"><span class=pre >Categorical</span></code> is created which facilitated making dummies.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[1]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >import</span> <span class=nn >pandas</span> <span class=k >as</span> <span class=nn >pd</span>
<span class=kn >from</span> <span class=nn >linearmodels.datasets</span> <span class=kn >import</span> <span class=n >wage_panel</span>

<span class=n >data</span> <span class=o >=</span> <span class=n >wage_panel</span><span class=o >.</span><span class=n >load</span><span class=p >()</span>
<span class=n >year</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >Categorical</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >year</span><span class=p >)</span>
<span class=n >data</span> <span class=o >=</span> <span class=n >data</span><span class=o >.</span><span class=n >set_index</span><span class=p >([</span><span class=s2 >"nr"</span><span class=p >,</span> <span class=s2 >"year"</span><span class=p >])</span>
<span class=n >data</span><span class=p >[</span><span class=s2 >"year"</span><span class=p >]</span> <span class=o >=</span> <span class=n >year</span>
<span class=nb >print</span><span class=p >(</span><span class=n >wage_panel</span><span class=o >.</span><span class=n >DESCR</span><span class=p >)</span>
<span class=nb >print</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >head</span><span class=p >())</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>

F. Vella and M. Verbeek (1998), "Whose Wages Do Unions Raise? A Dynamic Model
of Unionism and Wage Rate Determination for Young Men," Journal of Applied
Econometrics 13, 163-183.

nr                       person identifier
year                     1980 to 1987
black                    =1 if black
exper                    labor market experience
hisp                     =1 if Hispanic
hours                    annual hours worked
married                  =1 if married
educ                     years of schooling
union                    =1 if in union
lwage                    log(wage)
expersq                  exper^2
occupation               Occupation code

         black  exper  hisp  hours  married  educ  union     lwage  expersq  \
nr year
13 1980      0      1     0   2672        0    14      0  1.197540        1
   1981      0      2     0   2320        0    14      1  1.853060        4
   1982      0      3     0   2940        0    14      0  1.344462        9
   1983      0      4     0   2960        0    14      0  1.433213       16
   1984      0      5     0   3071        0    14      0  1.568125       25

         occupation  year
nr year
13 1980           9  1980
   1981           9  1981
   1982           9  1982
   1983           9  1983
   1984           5  1984
</pre></div></div> </div> </section> <section id=Basic-regression-on-panel-data > <h2 id=Basic-regression-on-panel-data >Basic regression on panel data<a class=headerlink  href="#Basic-regression-on-panel-data" title="Permalink to this heading">¶</a></h2> <p><code class="docutils literal notranslate"><span class=pre >PooledOLS</span></code> is just plain OLS that understands that various panel data structures. It is useful as a base model. Here the log wage is modeled using all of the variables and time dummies.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[2]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >import</span> <span class=nn >statsmodels.api</span> <span class=k >as</span> <span class=nn >sm</span>
<span class=kn >from</span> <span class=nn >linearmodels.panel</span> <span class=kn >import</span> <span class=n >PooledOLS</span>

<span class=n >exog_vars</span> <span class=o >=</span> <span class=p >[</span><span class=s2 >"black"</span><span class=p >,</span> <span class=s2 >"hisp"</span><span class=p >,</span> <span class=s2 >"exper"</span><span class=p >,</span> <span class=s2 >"expersq"</span><span class=p >,</span> <span class=s2 >"married"</span><span class=p >,</span> <span class=s2 >"educ"</span><span class=p >,</span> <span class=s2 >"union"</span><span class=p >,</span> <span class=s2 >"year"</span><span class=p >]</span>
<span class=n >exog</span> <span class=o >=</span> <span class=n >sm</span><span class=o >.</span><span class=n >add_constant</span><span class=p >(</span><span class=n >data</span><span class=p >[</span><span class=n >exog_vars</span><span class=p >])</span>
<span class=n >mod</span> <span class=o >=</span> <span class=n >PooledOLS</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >,</span> <span class=n >exog</span><span class=p >)</span>
<span class=n >pooled_res</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=n >pooled_res</span><span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                          PooledOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.1893
Estimator:                  PooledOLS   R-squared (Between):              0.2066
No. Observations:                4360   R-squared (Within):               0.1692
Date:                Wed, Nov 09 2022   R-squared (Overall):              0.1893
Time:                        06:51:48   Log-likelihood                   -2982.0
Cov. Estimator:            Unadjusted
                                        F-statistic:                      72.459
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                 F(14,4345)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             72.459
                                        P-value                           0.0000
Time periods:                       8   Distribution:                 F(14,4345)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          0.0921     0.0783     1.1761     0.2396     -0.0614      0.2455
black         -0.1392     0.0236    -5.9049     0.0000     -0.1855     -0.0930
hisp           0.0160     0.0208     0.7703     0.4412     -0.0248      0.0568
exper          0.0672     0.0137     4.9095     0.0000      0.0404      0.0941
expersq       -0.0024     0.0008    -2.9413     0.0033     -0.0040     -0.0008
married        0.1083     0.0157     6.8997     0.0000      0.0775      0.1390
educ           0.0913     0.0052     17.442     0.0000      0.0811      0.1016
union          0.1825     0.0172     10.635     0.0000      0.1488      0.2161
year.1981      0.0583     0.0304     1.9214     0.0548     -0.0012      0.1178
year.1982      0.0628     0.0332     1.8900     0.0588     -0.0023      0.1279
year.1983      0.0620     0.0367     1.6915     0.0908     -0.0099      0.1339
year.1984      0.0905     0.0401     2.2566     0.0241      0.0119      0.1691
year.1985      0.1092     0.0434     2.5200     0.0118      0.0243      0.1942
year.1986      0.1420     0.0464     3.0580     0.0022      0.0509      0.2330
year.1987      0.1738     0.0494     3.5165     0.0004      0.0769      0.2707
==============================================================================
</pre></div></div> </div> </section> <section id=Estimating-parameters-with-uncorrelated-effects > <h2 id=Estimating-parameters-with-uncorrelated-effects >Estimating parameters with uncorrelated effects<a class=headerlink  href="#Estimating-parameters-with-uncorrelated-effects" title="Permalink to this heading">¶</a></h2> <p>When modeling panel data it is common to consider models beyond what OLS will efficiently estimate. The most common are error component models which add an additional term to the standard OLS model,</p> <div class="math notranslate nohighlight"> \[y_{it} = x_{it}\beta + \alpha_{i} + \epsilon_{it}\]</div> <p>where <span class="math notranslate nohighlight">\(\alpha_i\)</span> affects all values of entity i. When the <span class="math notranslate nohighlight">\(\alpha_i\)</span> are uncorrelated with the regressors in <span class="math notranslate nohighlight">\(x_{it}\)</span>, a random effects model can be used to efficiently estimate parameters of this model.</p> <section id=Random-effects > <h3 id=Random-effects >Random effects<a class=headerlink  href="#Random-effects" title="Permalink to this heading">¶</a></h3> <p>The random effects model is virtually identical to the pooled OLS model except that is accounts for the structure of the model and so is more efficient. Random effects uses a quasi-demeaning strategy which subtracts the time average of the within entity values to account for the common shock.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[3]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >from</span> <span class=nn >linearmodels.panel</span> <span class=kn >import</span> <span class=n >RandomEffects</span>

<span class=n >mod</span> <span class=o >=</span> <span class=n >RandomEffects</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >,</span> <span class=n >exog</span><span class=p >)</span>
<span class=n >re_res</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=n >re_res</span><span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                        RandomEffects Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.1806
Estimator:              RandomEffects   R-squared (Between):              0.1853
No. Observations:                4360   R-squared (Within):               0.1799
Date:                Wed, Nov 09 2022   R-squared (Overall):              0.1828
Time:                        06:51:48   Log-likelihood                   -1622.5
Cov. Estimator:            Unadjusted
                                        F-statistic:                      68.409
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                 F(14,4345)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             68.409
                                        P-value                           0.0000
Time periods:                       8   Distribution:                 F(14,4345)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          0.0234     0.1514     0.1546     0.8771     -0.2735      0.3203
black         -0.1394     0.0480    -2.9054     0.0037     -0.2334     -0.0453
hisp           0.0217     0.0428     0.5078     0.6116     -0.0622      0.1057
exper          0.1058     0.0154     6.8706     0.0000      0.0756      0.1361
expersq       -0.0047     0.0007    -6.8623     0.0000     -0.0061     -0.0034
married        0.0638     0.0168     3.8035     0.0001      0.0309      0.0967
educ           0.0919     0.0107     8.5744     0.0000      0.0709      0.1129
union          0.1059     0.0179     5.9289     0.0000      0.0709      0.1409
year.1981      0.0404     0.0247     1.6362     0.1019     -0.0080      0.0889
year.1982      0.0309     0.0324     0.9519     0.3412     -0.0327      0.0944
year.1983      0.0202     0.0417     0.4840     0.6284     -0.0616      0.1020
year.1984      0.0430     0.0515     0.8350     0.4037     -0.0580      0.1440
year.1985      0.0577     0.0615     0.9383     0.3482     -0.0629      0.1782
year.1986      0.0918     0.0716     1.2834     0.1994     -0.0485      0.2321
year.1987      0.1348     0.0817     1.6504     0.0989     -0.0253      0.2950
==============================================================================
</pre></div></div> </div> <p>The model fit is fairly similar, although the return to experience has changed substantially, as has its significance. This is partially explainable by the inclusion of the year dummies which will fit the trend in experience and so only the cross-sectional differences matter. The quasi-differencing in the random effects estimator depends on a quantity that depends on the relative variance of the idiosyncratic shock and the common shock. This can be accessed using <code class="docutils literal notranslate"><span class=pre >variance_decomposition</span></code>.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[4]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >re_res</span><span class=o >.</span><span class=n >variance_decomposition</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[4]:
</pre></div> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
Effects                   0.106946
Residual                  0.123324
Percent due to Effects    0.464438
Name: Variance Decomposition, dtype: float64
</pre></div></div> </div> <p>The coefficient <span class="math notranslate nohighlight">\(\theta_i\)</span> determines how much demeaning takes place. When this value is 1, the RE model reduces to the pooled model since this occurs when there is no variance in the effects. When panels are unbalanced it will vary across entities, but in this balanced panel all values are the same.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[5]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >re_res</span><span class=o >.</span><span class=n >theta</span><span class=o >.</span><span class=n >head</span><span class=p >()</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[5]:
</pre></div> </div> <div class="output_area rendered_html docutils container"> <div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border=1  class=dataframe > <thead> <tr style="text-align: right;"> <th> <th>theta <tr> <th>nr <th> <tr> <th>13 <td>0.645059 <tr> <th>17 <td>0.645059 <tr> <th>18 <td>0.645059 <tr> <th>45 <td>0.645059 <tr> <th>110 <td>0.645059 </table> </div></div> </div> </section> <section id=The-between-estimator > <h3 id=The-between-estimator >The between estimator<a class=headerlink  href="#The-between-estimator" title="Permalink to this heading">¶</a></h3> <p>The between estimator is an alternative, usually less efficient estimator, can can be used to estimate model parameters. It is particular simple since it first computes the time averages of <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(x\)</span> and then runs a simple regression using these averages.</p> <p>The year dummies are dropped since the averaging removes differences due to the year. <code class="docutils literal notranslate"><span class=pre >expersq</span></code> was also dropped since it is fairly co-linear with <code class="docutils literal notranslate"><span class=pre >exper</span></code>. These results are broadly similar to the previous models.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[6]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >from</span> <span class=nn >linearmodels.panel</span> <span class=kn >import</span> <span class=n >BetweenOLS</span>

<span class=n >exog_vars</span> <span class=o >=</span> <span class=p >[</span><span class=s2 >"black"</span><span class=p >,</span> <span class=s2 >"hisp"</span><span class=p >,</span> <span class=s2 >"exper"</span><span class=p >,</span> <span class=s2 >"married"</span><span class=p >,</span> <span class=s2 >"educ"</span><span class=p >,</span> <span class=s2 >"union"</span><span class=p >]</span>
<span class=n >exog</span> <span class=o >=</span> <span class=n >sm</span><span class=o >.</span><span class=n >add_constant</span><span class=p >(</span><span class=n >data</span><span class=p >[</span><span class=n >exog_vars</span><span class=p >])</span>
<span class=n >mod</span> <span class=o >=</span> <span class=n >BetweenOLS</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >,</span> <span class=n >exog</span><span class=p >)</span>
<span class=n >be_res</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=n >be_res</span><span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                         BetweenOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.2155
Estimator:                 BetweenOLS   R-squared (Between):              0.2155
No. Observations:                 545   R-squared (Within):               0.1141
Date:                Wed, Nov 09 2022   R-squared (Overall):              0.1686
Time:                        06:51:48   Log-likelihood                   -194.54
Cov. Estimator:            Unadjusted
                                        F-statistic:                      24.633
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                   F(6,538)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             24.633
                                        P-value                           0.0000
Time periods:                       8   Distribution:                   F(6,538)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          0.2836     0.1784     1.5897     0.1125     -0.0668      0.6340
black         -0.1414     0.0489    -2.8915     0.0040     -0.2375     -0.0453
hisp           0.0100     0.0426     0.2355     0.8139     -0.0737      0.0938
exper          0.0278     0.0113     2.4538     0.0144      0.0055      0.0501
married        0.1416     0.0412     3.4346     0.0006      0.0606      0.2226
educ           0.0913     0.0107     8.5159     0.0000      0.0702      0.1123
union          0.2587     0.0460     5.6214     0.0000      0.1683      0.3491
==============================================================================
</pre></div></div> </div> <section id=Other-options > <h4 id=Other-options >Other options<a class=headerlink  href="#Other-options" title="Permalink to this heading">¶</a></h4> <p>The <code class="docutils literal notranslate"><span class=pre >fit</span></code> method of <code class="docutils literal notranslate"><span class=pre >BetweenOLS</span></code> takes an optional input <code class="docutils literal notranslate"><span class=pre >reweight</span></code> which uses GLS-like weighting when panels are unbalanced. In this dataset the panel is balanced and so using this option would have no effect. By default this is <code class="docutils literal notranslate"><span class=pre >False</span></code> and so the averages are directly used in OLS even when there are difference numbers of observations across entities.</p> </section> </section> </section> <section id=Handling-correlated-effects > <h2 id=Handling-correlated-effects >Handling correlated effects<a class=headerlink  href="#Handling-correlated-effects" title="Permalink to this heading">¶</a></h2> <p>When effects are correlated with the regressors the RE and BE estimators are not consistent. The usual solution is to use Fixed Effects which are available in <code class="docutils literal notranslate"><span class=pre >PanelOLS</span></code>. Fixed effects are called <code class="docutils literal notranslate"><span class=pre >entity_effects</span></code> when applied to entities and <code class="docutils literal notranslate"><span class=pre >time_effects</span></code> when applied to the time dimension:</p> <section id=Including-fixed-effects > <h3 id=Including-fixed-effects >Including fixed effects<a class=headerlink  href="#Including-fixed-effects" title="Permalink to this heading">¶</a></h3> <p>Entity effects are included by setting <code class="docutils literal notranslate"><span class=pre >entity_effects=True</span></code>. This is equivalent to including dummies for each entity. In this panel, this would add 545 dummy variables and estimation of the model would be considerably slower. <code class="docutils literal notranslate"><span class=pre >PanelOLS</span></code> does not actually use dummy variables and instead uses group-wise demeaning to achieve the same effect.</p> <section id=Time-invariant-Variables > <h4 id=Time-invariant-Variables >Time-invariant Variables<a class=headerlink  href="#Time-invariant-Variables" title="Permalink to this heading">¶</a></h4> <p>Time-invariant variables cannot be included when using entity effects since, once demeaned, these will all be 0. Here <code class="docutils literal notranslate"><span class=pre >exper</span></code> is also excluded since once entity effects and time dummies are incorporated, <code class="docutils literal notranslate"><span class=pre >exper</span></code> is perfectly co-linear.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[7]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >from</span> <span class=nn >linearmodels.panel</span> <span class=kn >import</span> <span class=n >PanelOLS</span>

<span class=n >exog_vars</span> <span class=o >=</span> <span class=p >[</span><span class=s2 >"expersq"</span><span class=p >,</span> <span class=s2 >"union"</span><span class=p >,</span> <span class=s2 >"married"</span><span class=p >,</span> <span class=s2 >"year"</span><span class=p >]</span>
<span class=n >exog</span> <span class=o >=</span> <span class=n >sm</span><span class=o >.</span><span class=n >add_constant</span><span class=p >(</span><span class=n >data</span><span class=p >[</span><span class=n >exog_vars</span><span class=p >])</span>
<span class=n >mod</span> <span class=o >=</span> <span class=n >PanelOLS</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >,</span> <span class=n >exog</span><span class=p >,</span> <span class=n >entity_effects</span><span class=o >=</span><span class=kc >True</span><span class=p >)</span>
<span class=n >fe_res</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=n >fe_res</span><span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                          PanelOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.1806
Estimator:                   PanelOLS   R-squared (Between):             -0.0052
No. Observations:                4360   R-squared (Within):               0.1806
Date:                Wed, Nov 09 2022   R-squared (Overall):              0.0807
Time:                        06:51:48   Log-likelihood                   -1324.8
Cov. Estimator:            Unadjusted
                                        F-statistic:                      83.851
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                 F(10,3805)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             83.851
                                        P-value                           0.0000
Time periods:                       8   Distribution:                 F(10,3805)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          1.4260     0.0183     77.748     0.0000      1.3901      1.4620
expersq       -0.0052     0.0007    -7.3612     0.0000     -0.0066     -0.0038
union          0.0800     0.0193     4.1430     0.0000      0.0421      0.1179
married        0.0467     0.0183     2.5494     0.0108      0.0108      0.0826
year.1981      0.1512     0.0219     6.8883     0.0000      0.1082      0.1942
year.1982      0.2530     0.0244     10.360     0.0000      0.2051      0.3008
year.1983      0.3544     0.0292     12.121     0.0000      0.2971      0.4118
year.1984      0.4901     0.0362     13.529     0.0000      0.4191      0.5611
year.1985      0.6175     0.0452     13.648     0.0000      0.5288      0.7062
year.1986      0.7655     0.0561     13.638     0.0000      0.6555      0.8755
year.1987      0.9250     0.0688     13.450     0.0000      0.7902      1.0599
==============================================================================

F-test for Poolability: 9.1568
P-value: 0.0000
Distribution: F(544,3805)

Included effects: Entity
</pre></div></div> </div> </section> </section> <section id=Time-Effects > <h3 id=Time-Effects >Time Effects<a class=headerlink  href="#Time-Effects" title="Permalink to this heading">¶</a></h3> <p>Time effect can be added using <code class="docutils literal notranslate"><span class=pre >time_effects=True</span></code>. Here the time dummies are removed. Note that the core coefficients are identical. The only change is in the test statistic for poolability since not the “effects” include both entity and time, whereas before only entity were included.</p> <section id=Effects-vs-Dummies > <h4 id=Effects-vs-Dummies >Effects vs Dummies<a class=headerlink  href="#Effects-vs-Dummies" title="Permalink to this heading">¶</a></h4> <p>For variable which can be consistently estimated, such as time effects in the usual large N, fixed T panel, it is not necessary to include these as effects. They can instead be implemented as dummy variables.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[8]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >exog_vars</span> <span class=o >=</span> <span class=p >[</span><span class=s2 >"expersq"</span><span class=p >,</span> <span class=s2 >"union"</span><span class=p >,</span> <span class=s2 >"married"</span><span class=p >]</span>
<span class=n >exog</span> <span class=o >=</span> <span class=n >sm</span><span class=o >.</span><span class=n >add_constant</span><span class=p >(</span><span class=n >data</span><span class=p >[</span><span class=n >exog_vars</span><span class=p >])</span>
<span class=n >mod</span> <span class=o >=</span> <span class=n >PanelOLS</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >,</span> <span class=n >exog</span><span class=p >,</span> <span class=n >entity_effects</span><span class=o >=</span><span class=kc >True</span><span class=p >,</span> <span class=n >time_effects</span><span class=o >=</span><span class=kc >True</span><span class=p >)</span>
<span class=n >fe_te_res</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=n >fe_te_res</span><span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                          PanelOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.0216
Estimator:                   PanelOLS   R-squared (Between):             -0.0052
No. Observations:                4360   R-squared (Within):              -0.4809
Date:                Wed, Nov 09 2022   R-squared (Overall):             -0.2253
Time:                        06:51:49   Log-likelihood                   -1324.8
Cov. Estimator:            Unadjusted
                                        F-statistic:                      27.959
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                  F(3,3805)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             27.959
                                        P-value                           0.0000
Time periods:                       8   Distribution:                  F(3,3805)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          1.8706     0.0378     49.430     0.0000      1.7964      1.9448
expersq       -0.0052     0.0007    -7.3612     0.0000     -0.0066     -0.0038
union          0.0800     0.0193     4.1430     0.0000      0.0421      0.1179
married        0.0467     0.0183     2.5494     0.0108      0.0108      0.0826
==============================================================================

F-test for Poolability: 10.067
P-value: 0.0000
Distribution: F(551,3805)

Included effects: Entity, Time
</pre></div></div> </div> </section> <section id=Other-Options > <h4 id=Other-Options >Other Options<a class=headerlink  href="#Other-Options" title="Permalink to this heading">¶</a></h4> <p>Some additional options are available when using <code class="docutils literal notranslate"><span class=pre >PanelOLS</span></code> and effects. The <code class="docutils literal notranslate"><span class=pre >use_lsdv</span></code> can be used to force the model to be estimated using dummy variables. This is not necessary and will be slower in most circumstances. This options is primarily included for testing. <code class="docutils literal notranslate"><span class=pre >auto_df</span></code> instructs <code class="docutils literal notranslate"><span class=pre >PanelOLS</span></code> to determine the degree of freedom adjustment to make. Unlike most other estimators, the treatment of effects depends on the covariance estimator. For example, when using a classic covariance estimator, effects count as lost degrees of freedom. When using entity effects and clustering by entity, they do not. Setting <code class="docutils literal notranslate"><span class=pre >auto_df=False</span></code> will allow the entities to be counted or not, depending on the value of <code class="docutils literal notranslate"><span class=pre >count_effects</span></code>.</p> </section> </section> <section id=Other-Effects > <h3 id=Other-Effects >Other Effects<a class=headerlink  href="#Other-Effects" title="Permalink to this heading">¶</a></h3> <p><code class="docutils literal notranslate"><span class=pre >PanelOLS</span></code> can be used to estimated models with up to 2-effects fixed effects. These can include any combination of</p> <ul class=simple > <li><p>Entity effects</p> <li><p>Time effects</p> <li><p>Other effects</p> </ul> <p>Other effects are specified using the <code class="docutils literal notranslate"><span class=pre >other_effects</span></code> input of <code class="docutils literal notranslate"><span class=pre >PanelOLS</span></code>. The input should have the same number of observations as the <code class="docutils literal notranslate"><span class=pre >engog</span></code> and can have 1 or two columns. Below we reproduce the model fitted with time effects only using <code class="docutils literal notranslate"><span class=pre >other_effects</span></code> to set the effect.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[9]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >from</span> <span class=nn >linearmodels.panel.data</span> <span class=kn >import</span> <span class=n >PanelData</span>

<span class=n >exog_vars</span> <span class=o >=</span> <span class=p >[</span><span class=s2 >"expersq"</span><span class=p >,</span> <span class=s2 >"union"</span><span class=p >,</span> <span class=s2 >"married"</span><span class=p >]</span>
<span class=n >exog</span> <span class=o >=</span> <span class=n >sm</span><span class=o >.</span><span class=n >add_constant</span><span class=p >(</span><span class=n >data</span><span class=p >[</span><span class=n >exog_vars</span><span class=p >])</span>
<span class=c1 ># Use the `PanelData` structure to simplify constructing the time IDs</span>
<span class=n >time_ids</span> <span class=o >=</span> <span class=n >pd</span><span class=o >.</span><span class=n >DataFrame</span><span class=p >(</span>
    <span class=n >PanelData</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >)</span><span class=o >.</span><span class=n >time_ids</span><span class=p >,</span> <span class=n >index</span><span class=o >=</span><span class=n >data</span><span class=o >.</span><span class=n >index</span><span class=p >,</span> <span class=n >columns</span><span class=o >=</span><span class=p >[</span><span class=s2 >"Other Effect"</span><span class=p >]</span>
<span class=p >)</span>

<span class=n >mod</span> <span class=o >=</span> <span class=n >PanelOLS</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >,</span> <span class=n >exog</span><span class=p >,</span> <span class=n >entity_effects</span><span class=o >=</span><span class=kc >True</span><span class=p >,</span> <span class=n >other_effects</span><span class=o >=</span><span class=n >time_ids</span><span class=p >)</span>
<span class=n >fe_oe_res</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=n >fe_oe_res</span><span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                          PanelOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.0216
Estimator:                   PanelOLS   R-squared (Between):             -0.0052
No. Observations:                4360   R-squared (Within):              -0.4809
Date:                Wed, Nov 09 2022   R-squared (Overall):             -0.2253
Time:                        06:51:49   Log-likelihood                   -1324.8
Cov. Estimator:            Unadjusted
                                        F-statistic:                      27.959
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                  F(3,3805)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             27.959
                                        P-value                           0.0000
Time periods:                       8   Distribution:                  F(3,3805)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          1.8706     0.0378     49.430     0.0000      1.7964      1.9448
expersq       -0.0052     0.0007    -7.3612     0.0000     -0.0066     -0.0038
union          0.0800     0.0193     4.1430     0.0000      0.0421      0.1179
married        0.0467     0.0183     2.5494     0.0108      0.0108      0.0826
==============================================================================

F-test for Poolability: 10.067
P-value: 0.0000
Distribution: F(551,3805)

Included effects: Entity, Other Effect (Other Effect)
Model includes 1 other effect
Other Effect Observations per group (Other Effect):
Avg Obs: 545.00, Min Obs: 545.00, Max Obs: 545.00, Groups: 8
</pre></div></div> </div> </section> <section id=Using-first-differences > <h3 id=Using-first-differences >Using first differences<a class=headerlink  href="#Using-first-differences" title="Permalink to this heading">¶</a></h3> <p>First differencing is an alternative to using fixed effects when there might be correlation. When using first differences, time-invariant variables must be excluded. Additionally, only one linear time-trending variable can be included since this will look like a constant. This variable will soak up all time-trends in the data, and so interpretations of these variable can be challenging.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[10]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >from</span> <span class=nn >linearmodels.panel</span> <span class=kn >import</span> <span class=n >FirstDifferenceOLS</span>

<span class=n >exog_vars</span> <span class=o >=</span> <span class=p >[</span><span class=s2 >"exper"</span><span class=p >,</span> <span class=s2 >"expersq"</span><span class=p >,</span> <span class=s2 >"union"</span><span class=p >,</span> <span class=s2 >"married"</span><span class=p >]</span>
<span class=n >exog</span> <span class=o >=</span> <span class=n >data</span><span class=p >[</span><span class=n >exog_vars</span><span class=p >]</span>
<span class=n >mod</span> <span class=o >=</span> <span class=n >FirstDifferenceOLS</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >,</span> <span class=n >exog</span><span class=p >)</span>
<span class=n >fd_res</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >()</span>
<span class=nb >print</span><span class=p >(</span><span class=n >fd_res</span><span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                     FirstDifferenceOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.0268
Estimator:         FirstDifferenceOLS   R-squared (Between):              0.5491
No. Observations:                3815   R-squared (Within):               0.1763
Date:                Wed, Nov 09 2022   R-squared (Overall):              0.5328
Time:                        06:51:49   Log-likelihood                   -2305.5
Cov. Estimator:            Unadjusted
                                        F-statistic:                      26.208
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                  F(4,3811)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             26.208
                                        P-value                           0.0000
Time periods:                       8   Distribution:                  F(4,3811)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
exper          0.1158     0.0196     5.9096     0.0000      0.0773      0.1542
expersq       -0.0039     0.0014    -2.8005     0.0051     -0.0066     -0.0012
union          0.0428     0.0197     2.1767     0.0296      0.0042      0.0813
married        0.0381     0.0229     1.6633     0.0963     -0.0068      0.0831
==============================================================================
</pre></div></div> </div> </section> </section> <section id=Comparing-models > <h2 id=Comparing-models >Comparing models<a class=headerlink  href="#Comparing-models" title="Permalink to this heading">¶</a></h2> <p>Model results can be compared using <code class="docutils literal notranslate"><span class=pre >compare</span></code>. <code class="docutils literal notranslate"><span class=pre >compare</span></code> accepts lists of results, a dictionary of results where the key is interpreted as the model name.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[11]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >from</span> <span class=nn >linearmodels.panel</span> <span class=kn >import</span> <span class=n >compare</span>

<span class=nb >print</span><span class=p >(</span><span class=n >compare</span><span class=p >({</span><span class=s2 >"BE"</span><span class=p >:</span> <span class=n >be_res</span><span class=p >,</span> <span class=s2 >"RE"</span><span class=p >:</span> <span class=n >re_res</span><span class=p >,</span> <span class=s2 >"Pooled"</span><span class=p >:</span> <span class=n >pooled_res</span><span class=p >}))</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                        Model Comparison
===============================================================
                                BE              RE       Pooled
---------------------------------------------------------------
Dep. Variable                lwage           lwage        lwage
Estimator               BetweenOLS   RandomEffects    PooledOLS
No. Observations               545            4360         4360
Cov. Est.               Unadjusted      Unadjusted   Unadjusted
R-squared                   0.2155          0.1806       0.1893
R-Squared (Within)          0.1141          0.1799       0.1692
R-Squared (Between)         0.2155          0.1853       0.2066
R-Squared (Overall)         0.1686          0.1828       0.1893
F-statistic                 24.633          68.409       72.459
P-value (F-stat)            0.0000          0.0000       0.0000
===================== ============ =============== ============
const                       0.2836          0.0234       0.0921
                          (1.5897)        (0.1546)     (1.1761)
black                      -0.1414         -0.1394      -0.1392
                         (-2.8915)       (-2.9054)    (-5.9049)
hisp                        0.0100          0.0217       0.0160
                          (0.2355)        (0.5078)     (0.7703)
exper                       0.0278          0.1058       0.0672
                          (2.4538)        (6.8706)     (4.9095)
married                     0.1416          0.0638       0.1083
                          (3.4346)        (3.8035)     (6.8997)
educ                        0.0913          0.0919       0.0913
                          (8.5159)        (8.5744)     (17.442)
union                       0.2587          0.1059       0.1825
                          (5.6214)        (5.9289)     (10.635)
expersq                                    -0.0047      -0.0024
                                         (-6.8623)    (-2.9413)
year.1981                                   0.0404       0.0583
                                          (1.6362)     (1.9214)
year.1982                                   0.0309       0.0628
                                          (0.9519)     (1.8900)
year.1983                                   0.0202       0.0620
                                          (0.4840)     (1.6915)
year.1984                                   0.0430       0.0905
                                          (0.8350)     (2.2566)
year.1985                                   0.0577       0.1092
                                          (0.9383)     (2.5200)
year.1986                                   0.0918       0.1420
                                          (1.2834)     (3.0580)
year.1987                                   0.1348       0.1738
                                          (1.6504)     (3.5165)
---------------------------------------------------------------

T-stats reported in parentheses
</pre></div></div> </div> </section> <section id=Covariance-options > <h2 id=Covariance-options >Covariance options<a class=headerlink  href="#Covariance-options" title="Permalink to this heading">¶</a></h2> <section id=Heteroskedasticity-Robust-Covariance > <h3 id=Heteroskedasticity-Robust-Covariance >Heteroskedasticity Robust Covariance<a class=headerlink  href="#Heteroskedasticity-Robust-Covariance" title="Permalink to this heading">¶</a></h3> <p>White”s robust covariance can be used by setting <code class="docutils literal notranslate"><span class=pre >cov_type="robust</span></code>. This estimator adds some robustness against certain types of specification issues but should not be used when using fixed effects (entity effects) since it is no longer robust. Instead a clustered covariance is required.</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[12]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >exog_vars</span> <span class=o >=</span> <span class=p >[</span><span class=s2 >"black"</span><span class=p >,</span> <span class=s2 >"hisp"</span><span class=p >,</span> <span class=s2 >"exper"</span><span class=p >,</span> <span class=s2 >"expersq"</span><span class=p >,</span> <span class=s2 >"married"</span><span class=p >,</span> <span class=s2 >"educ"</span><span class=p >,</span> <span class=s2 >"union"</span><span class=p >]</span>
<span class=n >exog</span> <span class=o >=</span> <span class=n >sm</span><span class=o >.</span><span class=n >add_constant</span><span class=p >(</span><span class=n >data</span><span class=p >[</span><span class=n >exog_vars</span><span class=p >])</span>
<span class=n >mod</span> <span class=o >=</span> <span class=n >PooledOLS</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >lwage</span><span class=p >,</span> <span class=n >exog</span><span class=p >)</span>
<span class=n >robust</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >(</span><span class=n >cov_type</span><span class=o >=</span><span class=s2 >"robust"</span><span class=p >)</span>
</pre></div> </div> </div> </section> <section id=Clustered-by-Entity > <h3 id=Clustered-by-Entity >Clustered by Entity<a class=headerlink  href="#Clustered-by-Entity" title="Permalink to this heading">¶</a></h3> <p>The usual variable to cluster are are entity or entity and time. The can be implemented using <code class="docutils literal notranslate"><span class=pre >cov_type="clustered"</span></code> and the additional keyword arguments <code class="docutils literal notranslate"><span class=pre >cluster_entity=True</span></code> and/or <code class="docutils literal notranslate"><span class=pre >cluster_time=True</span></code>.</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[13]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >clust_entity</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >(</span><span class=n >cov_type</span><span class=o >=</span><span class=s2 >"clustered"</span><span class=p >,</span> <span class=n >cluster_entity</span><span class=o >=</span><span class=kc >True</span><span class=p >)</span>
</pre></div> </div> </div> <p>This next example clusters by both.</p> <div class="nbinput nblast docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[14]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >clust_entity_time</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >(</span>
    <span class=n >cov_type</span><span class=o >=</span><span class=s2 >"clustered"</span><span class=p >,</span> <span class=n >cluster_entity</span><span class=o >=</span><span class=kc >True</span><span class=p >,</span> <span class=n >cluster_time</span><span class=o >=</span><span class=kc >True</span>
<span class=p >)</span>
</pre></div> </div> </div> <p>An <code class="docutils literal notranslate"><span class=pre >OrderedDict</span></code> is used to hold the results for comparing models. This allows the models to be named as well as for the order of the models to be specified. A standard <code class="docutils literal notranslate"><span class=pre >dict</span></code> will produce effectively random order.</p> <p>Clustering on entity reduced the t-stats across the board. This suggests there is important correlation in the residuals per entity. Clustering by both also decreases the t-stats which suggests that there is cross-sectional dependence in the data. <em>Note</em>: clustering by entity addresses correlation across time and clustering by time controls for correlation between entities in a time period.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[15]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=kn >from</span> <span class=nn >collections</span> <span class=kn >import</span> <span class=n >OrderedDict</span>

<span class=n >res</span> <span class=o >=</span> <span class=n >OrderedDict</span><span class=p >()</span>
<span class=n >res</span><span class=p >[</span><span class=s2 >"Robust"</span><span class=p >]</span> <span class=o >=</span> <span class=n >robust</span>
<span class=n >res</span><span class=p >[</span><span class=s2 >"Entity"</span><span class=p >]</span> <span class=o >=</span> <span class=n >clust_entity</span>
<span class=n >res</span><span class=p >[</span><span class=s2 >"Entity-Time"</span><span class=p >]</span> <span class=o >=</span> <span class=n >clust_entity_time</span>
<span class=nb >print</span><span class=p >(</span><span class=n >compare</span><span class=p >(</span><span class=n >res</span><span class=p >))</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
                     Model Comparison
=========================================================
                           Robust      Entity Entity-Time
---------------------------------------------------------
Dep. Variable               lwage       lwage       lwage
Estimator               PooledOLS   PooledOLS   PooledOLS
No. Observations             4360        4360        4360
Cov. Est.                  Robust   Clustered   Clustered
R-squared                  0.1866      0.1866      0.1866
R-Squared (Within)         0.1679      0.1679      0.1679
R-Squared (Between)        0.2027      0.2027      0.2027
R-Squared (Overall)        0.1866      0.1866      0.1866
F-statistic                142.61      142.61      142.61
P-value (F-stat)           0.0000      0.0000      0.0000
===================== =========== =========== ===========
const                     -0.0347     -0.0347     -0.0347
                        (-0.5360)   (-0.2892)   (-0.3145)
black                     -0.1438     -0.1438     -0.1438
                        (-5.9045)   (-2.8727)   (-3.0067)
hisp                       0.0157      0.0157      0.0157
                         (0.7952)    (0.4008)    (0.4428)
exper                      0.0892      0.0892      0.0892
                         (8.7881)    (7.1728)    (6.3223)
expersq                   -0.0028     -0.0028     -0.0028
                        (-4.1934)   (-3.2747)   (-3.1571)
married                    0.1077      0.1077      0.1077
                         (7.0525)    (4.1314)    (4.8989)
educ                       0.0994      0.0994      0.0994
                         (21.626)    (10.802)    (12.296)
union                      0.1801      0.1801      0.1801
                         (11.087)    (6.5343)    (6.6732)
---------------------------------------------------------

T-stats reported in parentheses
</pre></div></div> </div> </section> <section id=Other-clusters > <h3 id=Other-clusters >Other clusters<a class=headerlink  href="#Other-clusters" title="Permalink to this heading">¶</a></h3> <p>Other clusters can be used by directly passing integer arrays (1 or 2 columns, or a 1-d array) using the input <code class="docutils literal notranslate"><span class=pre >clusters</span></code>. This example clustered by occupation, which is probably not a reliable variable to cluster on since there are only 9 groups and the usual theory for clustered standard errors requires that the number of clusters is large.</p> <div class="nbinput docutils container"> <div class="prompt highlight-none notranslate"><div class=highlight ><pre><span></span>[16]:
</pre></div> </div> <div class="input_area highlight-ipython3 notranslate"><div class=highlight ><pre><span></span><span class=n >clust_entity</span> <span class=o >=</span> <span class=n >mod</span><span class=o >.</span><span class=n >fit</span><span class=p >(</span><span class=n >cov_type</span><span class=o >=</span><span class=s2 >"clustered"</span><span class=p >,</span> <span class=n >clusters</span><span class=o >=</span><span class=n >data</span><span class=o >.</span><span class=n >occupation</span><span class=p >)</span>
<span class=nb >print</span><span class=p >(</span><span class=n >data</span><span class=o >.</span><span class=n >occupation</span><span class=o >.</span><span class=n >value_counts</span><span class=p >())</span>
<span class=nb >print</span><span class=p >(</span><span class=n >clust_entity</span><span class=p >)</span>
</pre></div> </div> </div> <div class="nboutput nblast docutils container"> <div class="prompt empty docutils container"> </div> <div class="output_area docutils container"> <div class=highlight ><pre>
5    934
6    881
9    509
4    486
1    453
7    401
2    399
3    233
8     64
Name: occupation, dtype: int64
                          PooledOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.1866
Estimator:                  PooledOLS   R-squared (Between):              0.2027
No. Observations:                4360   R-squared (Within):               0.1679
Date:                Wed, Nov 09 2022   R-squared (Overall):              0.1866
Time:                        06:51:49   Log-likelihood                   -2989.2
Cov. Estimator:             Clustered
                                        F-statistic:                      142.61
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                  F(7,4352)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             116.58
                                        P-value                           0.0000
Time periods:                       8   Distribution:                  F(7,4352)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const         -0.0347     0.1479    -0.2346     0.8145     -0.3247      0.2553
black         -0.1438     0.0297    -4.8469     0.0000     -0.2020     -0.0857
hisp           0.0157     0.0266     0.5892     0.5557     -0.0365      0.0679
exper          0.0892     0.0134     6.6513     0.0000      0.0629      0.1155
expersq       -0.0028     0.0009    -3.2442     0.0012     -0.0046     -0.0011
married        0.1077     0.0139     7.7322     0.0000      0.0804      0.1350
educ           0.0994     0.0112     8.8846     0.0000      0.0775      0.1213
union          0.1801     0.0320     5.6323     0.0000      0.1174      0.2428
==============================================================================
</pre></div></div> </div> </section> </section> </section> </article> </div> </div> </main> </div> <footer class=md-footer > <div class=md-footer-nav > <nav class="md-footer-nav__inner md-grid"> <a href=data-formats.html  title="Data Formats for Panel Data Analysis" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev > <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis > <span class=md-footer-nav__direction > Previous </span> Data Formats for Panel Data Analysis </span> </div> </a> <a href=using-formulas.html  title="Using formulas to specify models" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next > <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class=md-flex__ellipsis > <span class=md-footer-nav__direction > Next </span> Using formulas to specify models </span> </div> <div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright > <div class=md-footer-copyright__highlight > &#169; Copyright 2017, Kevin Sheppard. </div> Created using <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.3.0. and <a href="https://github.com/bashtage/sphinx-material/">Material for Sphinx</a> </div> </div> </div> </footer> <script src="../../_static/javascripts/application.js"></script> <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>