


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../_static/favicon.ico">
    
    
  
      
        <title>Examples - linearmodels v5.4 (+2)</title>
      
    

  <link rel="apple-touch-icon" sizes="180x180" href="../../_static/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../_static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../_static/icons/favicon-16x16.png">
  <link rel="manifest" href="../../_static/icons/site.webmanifest">
  <link rel="mask-icon" href="../../_static/icons/safari-pinned-tab.svg" color="#2196f3">
  <link rel="shortcut icon" href="../../_static/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#f8f8f8">
  <meta name="msapplication-config" content="../../_static/icons/browserconfig.xml">

    
      
        
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../../_static/sphinx_immaterial_theme.af531f03affe68837.min.css?v=2410bb73" />
        <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />
        <link rel="stylesheet" type="text/css" href="../../_static/css/small_fixes.css?v=34934119" />
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#Loading-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="linearmodels v5.4 (+2)" class="md-header__button md-logo" aria-label="linearmodels v5.4 (+2)" data-md-component="logo">
      <img src="../../_static/bw-logo.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            linearmodels v5.4 (+2)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Examples
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/bashtage/linearmodels/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    linearmodels
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="linearmodels v5.4 (+2)" class="md-nav__button md-logo" aria-label="linearmodels v5.4 (+2)" data-md-component="logo">
      <img src="../../_static/bw-logo.svg" alt="logo">
    </a>
    linearmodels v5.4 (+2)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bashtage/linearmodels/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    linearmodels
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../iv/index.html" class="md-nav__link">
        <span title="/iv/index.rst (reference label)" class="md-ellipsis">Instrumental Variable Estimation</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../index.html"><span title="/panel/index.rst (reference label)" class="md-ellipsis">Panel Data Model Estimation</span></a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Panel Data Model Estimation" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          <span title="/panel/index.rst (reference label)" class="md-ellipsis">Panel Data Model Estimation</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction.html" class="md-nav__link">
        <span title="/panel/introduction.rst (reference label)" class="md-ellipsis">Introduction</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="data-formats.html" class="md-nav__link">
        <span title="/panel/examples/data-formats.ipynb (reference label)" class="md-ellipsis">Data Formats for Panel Data Analysis</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span title="/panel/examples/examples.ipynb (reference label)" class="md-ellipsis">Examples</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span title="/panel/examples/examples.ipynb (reference label)" class="md-ellipsis">Examples</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Loading-data" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#loading-data (reference label)" class="md-ellipsis">Loading data</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Basic-regression-on-panel-data" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#basic-regression-on-panel-data (reference label)" class="md-ellipsis">Basic regression on panel data</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Estimating-parameters-with-uncorrelated-effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#estimating-parameters-with-uncorrelated-effects (reference label)" class="md-ellipsis">Estimating parameters with uncorrelated effects</span>
  </a>
  
    <nav class="md-nav" aria-label="Estimating parameters with uncorrelated effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Random-effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#random-effects (reference label)" class="md-ellipsis">Random effects</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#The-between-estimator" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#the-between-estimator (reference label)" class="md-ellipsis">The between estimator</span>
  </a>
  
    <nav class="md-nav" aria-label="The between estimator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Other-options" class="md-nav__link">
    <span class="md-ellipsis">Other options</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Handling-correlated-effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#handling-correlated-effects (reference label)" class="md-ellipsis">Handling correlated effects</span>
  </a>
  
    <nav class="md-nav" aria-label="Handling correlated effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Including-fixed-effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#including-fixed-effects (reference label)" class="md-ellipsis">Including fixed effects</span>
  </a>
  
    <nav class="md-nav" aria-label="Including fixed effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Time-invariant-Variables" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#time-invariant-variables (reference label)" class="md-ellipsis">Time-<wbr>invariant Variables</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Time-Effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#time-effects (reference label)" class="md-ellipsis">Time Effects</span>
  </a>
  
    <nav class="md-nav" aria-label="Time Effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Effects-vs-Dummies" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#effects-vs-dummies (reference label)" class="md-ellipsis">Effects vs Dummies</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Other-Options" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#other-options (reference label)" class="md-ellipsis">Other Options</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Other-Effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#other-effects (reference label)" class="md-ellipsis">Other Effects</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Using-first-differences" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#using-first-differences (reference label)" class="md-ellipsis">Using first differences</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Comparing-models" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#comparing-models (reference label)" class="md-ellipsis">Comparing models</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Covariance-options" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#covariance-options (reference label)" class="md-ellipsis">Covariance options</span>
  </a>
  
    <nav class="md-nav" aria-label="Covariance options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Heteroskedasticity-Robust-Covariance" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#heteroskedasticity-robust-covariance (reference label)" class="md-ellipsis">Heteroskedasticity Robust Covariance</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Clustered-by-Entity" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#clustered-by-entity (reference label)" class="md-ellipsis">Clustered by Entity</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Other-clusters" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#other-clusters (reference label)" class="md-ellipsis">Other clusters</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="using-formulas.html" class="md-nav__link">
        <span title="/panel/examples/using-formulas.ipynb (reference label)" class="md-ellipsis">Using formulas to specify models</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../pandas.html" class="md-nav__link">
        <span title="/panel/pandas.rst (reference label)" class="md-ellipsis">Comparison with pandas Panel<wbr>OLS and Fama<wbr>Mac<wbr>Beth</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference.html" class="md-nav__link">
        <span title="/panel/reference.rst (reference label)" class="md-ellipsis">Module Reference</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../mathematical-formula.html" class="md-nav__link">
        <span title="/panel/mathematical-formula.rst (reference label)" class="md-ellipsis">Formulas and Mathematical Detail</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq.html" class="md-nav__link">
        <span title="/panel/faq.rst (reference label)" class="md-ellipsis">Implementation Choices</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../asset-pricing/index.html" class="md-nav__link">
        <span title="/asset-pricing/index.rst (reference label)" class="md-ellipsis">Linear Factor Models for Asset Pricing</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/index.html" class="md-nav__link">
        <span title="/system/index.rst (reference label)" class="md-ellipsis">System Regression Models</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../utility.html" class="md-nav__link">
        <span title="/utility.rst (reference label)" class="md-ellipsis">Utilities</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility.html" class="md-nav__link">
        <span title="/compatibility.rst (reference label)" class="md-ellipsis">Compatibility</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../plan.html" class="md-nav__link">
        <span title="/plan.rst (reference label)" class="md-ellipsis">Module Plans</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing.html" class="md-nav__link">
        <span title="/contributing.rst (reference label)" class="md-ellipsis">Contributing</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../changes.html" class="md-nav__link">
        <span title="/changes.rst (reference label)" class="md-ellipsis">Change Log</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../references.html" class="md-nav__link">
        <span title="/references.rst (reference label)" class="md-ellipsis">References</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Loading-data" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#loading-data (reference label)" class="md-ellipsis">Loading data</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Basic-regression-on-panel-data" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#basic-regression-on-panel-data (reference label)" class="md-ellipsis">Basic regression on panel data</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Estimating-parameters-with-uncorrelated-effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#estimating-parameters-with-uncorrelated-effects (reference label)" class="md-ellipsis">Estimating parameters with uncorrelated effects</span>
  </a>
  
    <nav class="md-nav" aria-label="Estimating parameters with uncorrelated effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Random-effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#random-effects (reference label)" class="md-ellipsis">Random effects</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#The-between-estimator" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#the-between-estimator (reference label)" class="md-ellipsis">The between estimator</span>
  </a>
  
    <nav class="md-nav" aria-label="The between estimator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Other-options" class="md-nav__link">
    <span class="md-ellipsis">Other options</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Handling-correlated-effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#handling-correlated-effects (reference label)" class="md-ellipsis">Handling correlated effects</span>
  </a>
  
    <nav class="md-nav" aria-label="Handling correlated effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Including-fixed-effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#including-fixed-effects (reference label)" class="md-ellipsis">Including fixed effects</span>
  </a>
  
    <nav class="md-nav" aria-label="Including fixed effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Time-invariant-Variables" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#time-invariant-variables (reference label)" class="md-ellipsis">Time-<wbr>invariant Variables</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Time-Effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#time-effects (reference label)" class="md-ellipsis">Time Effects</span>
  </a>
  
    <nav class="md-nav" aria-label="Time Effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Effects-vs-Dummies" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#effects-vs-dummies (reference label)" class="md-ellipsis">Effects vs Dummies</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Other-Options" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#other-options (reference label)" class="md-ellipsis">Other Options</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Other-Effects" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#other-effects (reference label)" class="md-ellipsis">Other Effects</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Using-first-differences" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#using-first-differences (reference label)" class="md-ellipsis">Using first differences</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Comparing-models" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#comparing-models (reference label)" class="md-ellipsis">Comparing models</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Covariance-options" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#covariance-options (reference label)" class="md-ellipsis">Covariance options</span>
  </a>
  
    <nav class="md-nav" aria-label="Covariance options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Heteroskedasticity-Robust-Covariance" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#heteroskedasticity-robust-covariance (reference label)" class="md-ellipsis">Heteroskedasticity Robust Covariance</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Clustered-by-Entity" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#clustered-by-entity (reference label)" class="md-ellipsis">Clustered by Entity</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#Other-clusters" class="md-nav__link">
    <span title="/panel/examples/examples.ipynb#other-clusters (reference label)" class="md-ellipsis">Other clusters</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="Examples">Examples<a class="headerlink" href="#Examples" title="Link to this heading">¶</a></h1>
<p>These examples cover the models available for estimating panel models. The initial examples all ignore covariance options and so use the default classic covariance which is appropriate for homoskedastic data. The alternative covariance options are described at the end of this document.</p>
<h2 id="Loading-data">Loading data<a class="headerlink" href="#Loading-data" title="Link to this heading">¶</a></h2>
<p>These examples all make use of the wage panel from</p>
<ol class="upperalpha simple" start="6">
<li><p>Vella and M. Verbeek (1998), “Whose Wages Do Unions Raise? A Dynamic Model of Unionism and Wage Rate Determination for Young Men,” <em>Journal of Applied Econometrics</em> 13, 163-183.</p></li>
</ol>
<p>The data set consists of wages and characteristics for men during the 1980s. The entity identifier is <code class="docutils literal notranslate"><span class="pre">nr</span></code> and the time identified is <code class="docutils literal notranslate"><span class="pre">year</span></code>. This data is used extensively in Chapter 14 of <em>Introduction to Econometrics</em> by Jeffrey Wooldridge.</p>
<p>Here a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is used to hold the data in a format that can be understood as a panel. Before setting the index, a year <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> is created which facilitated making dummies.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[1]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">linearmodels.datasets</span> <span class="kn">import</span> <span class="n">wage_panel</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">wage_panel</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="n">year</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s2">&quot;nr&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">])</span>
<span class="n">data</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">year</span>
<span class="nb">print</span><span class="p">(</span><span class="n">wage_panel</span><span class="o">.</span><span class="n">DESCR</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

F. Vella and M. Verbeek (1998), &#34;Whose Wages Do Unions Raise? A Dynamic Model
of Unionism and Wage Rate Determination for Young Men,&#34; Journal of Applied
Econometrics 13, 163-183.

nr                       person identifier
year                     1980 to 1987
black                    =1 if black
exper                    labor market experience
hisp                     =1 if Hispanic
hours                    annual hours worked
married                  =1 if married
educ                     years of schooling
union                    =1 if in union
lwage                    log(wage)
expersq                  exper^2
occupation               Occupation code

         black  exper  hisp  hours  married  educ  union     lwage  expersq  \
nr year
13 1980      0      1     0   2672        0    14      0  1.197540        1
   1981      0      2     0   2320        0    14      1  1.853060        4
   1982      0      3     0   2940        0    14      0  1.344462        9
   1983      0      4     0   2960        0    14      0  1.433213       16
   1984      0      5     0   3071        0    14      0  1.568125       25

         occupation  year
nr year
13 1980           9  1980
   1981           9  1981
   1982           9  1982
   1983           9  1983
   1984           5  1984
</pre></div></div>
</div>
<h2 id="Basic-regression-on-panel-data">Basic regression on panel data<a class="headerlink" href="#Basic-regression-on-panel-data" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">PooledOLS</span></code> is just plain OLS that understands that various panel data structures. It is useful as a base model. Here the log wage is modeled using all of the variables and time dummies.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[2]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">PooledOLS</span>

<span class="n">exog_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;hisp&quot;</span><span class="p">,</span> <span class="s2">&quot;exper&quot;</span><span class="p">,</span> <span class="s2">&quot;expersq&quot;</span><span class="p">,</span> <span class="s2">&quot;married&quot;</span><span class="p">,</span> <span class="s2">&quot;educ&quot;</span><span class="p">,</span> <span class="s2">&quot;union&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">]</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">exog_vars</span><span class="p">])</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">PooledOLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">,</span> <span class="n">exog</span><span class="p">)</span>
<span class="n">pooled_res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pooled_res</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                          PooledOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.1893
Estimator:                  PooledOLS   R-squared (Between):              0.2066
No. Observations:                4360   R-squared (Within):               0.1692
Date:                Tue, Nov 07 2023   R-squared (Overall):              0.1893
Time:                        17:10:08   Log-likelihood                   -2982.0
Cov. Estimator:            Unadjusted
                                        F-statistic:                      72.459
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                 F(14,4345)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             72.459
                                        P-value                           0.0000
Time periods:                       8   Distribution:                 F(14,4345)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          0.0921     0.0783     1.1761     0.2396     -0.0614      0.2455
black         -0.1392     0.0236    -5.9049     0.0000     -0.1855     -0.0930
hisp           0.0160     0.0208     0.7703     0.4412     -0.0248      0.0568
exper          0.0672     0.0137     4.9095     0.0000      0.0404      0.0941
expersq       -0.0024     0.0008    -2.9413     0.0033     -0.0040     -0.0008
married        0.1083     0.0157     6.8997     0.0000      0.0775      0.1390
educ           0.0913     0.0052     17.442     0.0000      0.0811      0.1016
union          0.1825     0.0172     10.635     0.0000      0.1488      0.2161
year.1981      0.0583     0.0304     1.9214     0.0548     -0.0012      0.1178
year.1982      0.0628     0.0332     1.8900     0.0588     -0.0023      0.1279
year.1983      0.0620     0.0367     1.6915     0.0908     -0.0099      0.1339
year.1984      0.0905     0.0401     2.2566     0.0241      0.0119      0.1691
year.1985      0.1092     0.0434     2.5200     0.0118      0.0243      0.1942
year.1986      0.1420     0.0464     3.0580     0.0022      0.0509      0.2330
year.1987      0.1738     0.0494     3.5165     0.0004      0.0769      0.2707
==============================================================================
</pre></div></div>
</div>
<h2 id="Estimating-parameters-with-uncorrelated-effects">Estimating parameters with uncorrelated effects<a class="headerlink" href="#Estimating-parameters-with-uncorrelated-effects" title="Link to this heading">¶</a></h2>
<p>When modeling panel data it is common to consider models beyond what OLS will efficiently estimate. The most common are error component models which add an additional term to the standard OLS model,</p>
<div class="math notranslate nohighlight">
\[y_{it} = x_{it}\beta + \alpha_{i} + \epsilon_{it}\]</div>
<p>where <span class="math notranslate nohighlight">\(\alpha_i\)</span> affects all values of entity i. When the <span class="math notranslate nohighlight">\(\alpha_i\)</span> are uncorrelated with the regressors in <span class="math notranslate nohighlight">\(x_{it}\)</span>, a random effects model can be used to efficiently estimate parameters of this model.</p>
<h3 id="Random-effects">Random effects<a class="headerlink" href="#Random-effects" title="Link to this heading">¶</a></h3>
<p>The random effects model is virtually identical to the pooled OLS model except that is accounts for the structure of the model and so is more efficient. Random effects uses a quasi-demeaning strategy which subtracts the time average of the within entity values to account for the common shock.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[3]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">RandomEffects</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">RandomEffects</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">,</span> <span class="n">exog</span><span class="p">)</span>
<span class="n">re_res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re_res</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                        RandomEffects Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.1806
Estimator:              RandomEffects   R-squared (Between):              0.1853
No. Observations:                4360   R-squared (Within):               0.1799
Date:                Tue, Nov 07 2023   R-squared (Overall):              0.1828
Time:                        17:10:09   Log-likelihood                   -1622.5
Cov. Estimator:            Unadjusted
                                        F-statistic:                      68.409
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                 F(14,4345)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             68.409
                                        P-value                           0.0000
Time periods:                       8   Distribution:                 F(14,4345)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          0.0234     0.1514     0.1546     0.8771     -0.2735      0.3203
black         -0.1394     0.0480    -2.9054     0.0037     -0.2334     -0.0453
hisp           0.0217     0.0428     0.5078     0.6116     -0.0622      0.1057
exper          0.1058     0.0154     6.8706     0.0000      0.0756      0.1361
expersq       -0.0047     0.0007    -6.8623     0.0000     -0.0061     -0.0034
married        0.0638     0.0168     3.8035     0.0001      0.0309      0.0967
educ           0.0919     0.0107     8.5744     0.0000      0.0709      0.1129
union          0.1059     0.0179     5.9289     0.0000      0.0709      0.1409
year.1981      0.0404     0.0247     1.6362     0.1019     -0.0080      0.0889
year.1982      0.0309     0.0324     0.9519     0.3412     -0.0327      0.0944
year.1983      0.0202     0.0417     0.4840     0.6284     -0.0616      0.1020
year.1984      0.0430     0.0515     0.8350     0.4037     -0.0580      0.1440
year.1985      0.0577     0.0615     0.9383     0.3482     -0.0629      0.1782
year.1986      0.0918     0.0716     1.2834     0.1994     -0.0485      0.2321
year.1987      0.1348     0.0817     1.6504     0.0989     -0.0253      0.2950
==============================================================================
</pre></div></div>
</div>
<p>The model fit is fairly similar, although the return to experience has changed substantially, as has its significance. This is partially explainable by the inclusion of the year dummies which will fit the trend in experience and so only the cross-sectional differences matter. The quasi-differencing in the random effects estimator depends on a quantity that depends on the relative variance of the idiosyncratic shock and the common shock. This can be accessed using <code class="docutils literal notranslate"><span class="pre">variance_decomposition</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[4]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">re_res</span><span class="o">.</span><span class="n">variance_decomposition</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[4]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Effects                   0.106946
Residual                  0.123324
Percent due to Effects    0.464438
Name: Variance Decomposition, dtype: float64
</pre></div></div>
</div>
<p>The coefficient <span class="math notranslate nohighlight">\(\theta_i\)</span> determines how much demeaning takes place. When this value is 1, the RE model reduces to the pooled model since this occurs when there is no variance in the effects. When panels are unbalanced it will vary across entities, but in this balanced panel all values are the same.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[5]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">re_res</span><span class="o">.</span><span class="n">theta</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[5]:
</code></pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>theta</th>
    </tr>
    <tr>
      <th>nr</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>13</th>
      <td>0.645059</td>
    </tr>
    <tr>
      <th>17</th>
      <td>0.645059</td>
    </tr>
    <tr>
      <th>18</th>
      <td>0.645059</td>
    </tr>
    <tr>
      <th>45</th>
      <td>0.645059</td>
    </tr>
    <tr>
      <th>110</th>
      <td>0.645059</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<h3 id="The-between-estimator">The between estimator<a class="headerlink" href="#The-between-estimator" title="Link to this heading">¶</a></h3>
<p>The between estimator is an alternative, usually less efficient estimator, can can be used to estimate model parameters. It is particular simple since it first computes the time averages of <span class="math notranslate nohighlight">\(y\)</span> and <span class="math notranslate nohighlight">\(x\)</span> and then runs a simple regression using these averages.</p>
<p>The year dummies are dropped since the averaging removes differences due to the year. <code class="docutils literal notranslate"><span class="pre">expersq</span></code> was also dropped since it is fairly co-linear with <code class="docutils literal notranslate"><span class="pre">exper</span></code>. These results are broadly similar to the previous models.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[6]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">BetweenOLS</span>

<span class="n">exog_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;hisp&quot;</span><span class="p">,</span> <span class="s2">&quot;exper&quot;</span><span class="p">,</span> <span class="s2">&quot;married&quot;</span><span class="p">,</span> <span class="s2">&quot;educ&quot;</span><span class="p">,</span> <span class="s2">&quot;union&quot;</span><span class="p">]</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">exog_vars</span><span class="p">])</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">BetweenOLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">,</span> <span class="n">exog</span><span class="p">)</span>
<span class="n">be_res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">be_res</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                         BetweenOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.2155
Estimator:                 BetweenOLS   R-squared (Between):              0.2155
No. Observations:                 545   R-squared (Within):               0.1141
Date:                Tue, Nov 07 2023   R-squared (Overall):              0.1686
Time:                        17:10:09   Log-likelihood                   -194.54
Cov. Estimator:            Unadjusted
                                        F-statistic:                      24.633
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                   F(6,538)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             24.633
                                        P-value                           0.0000
Time periods:                       8   Distribution:                   F(6,538)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          0.2836     0.1784     1.5897     0.1125     -0.0668      0.6340
black         -0.1414     0.0489    -2.8915     0.0040     -0.2375     -0.0453
hisp           0.0100     0.0426     0.2355     0.8139     -0.0737      0.0938
exper          0.0278     0.0113     2.4538     0.0144      0.0055      0.0501
married        0.1416     0.0412     3.4346     0.0006      0.0606      0.2226
educ           0.0913     0.0107     8.5159     0.0000      0.0702      0.1123
union          0.2587     0.0460     5.6214     0.0000      0.1683      0.3491
==============================================================================
</pre></div></div>
</div>
<h4 id="Other-options">Other options<a class="headerlink" href="#Other-options" title="Link to this heading">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">fit</span></code> method of <code class="docutils literal notranslate"><span class="pre">BetweenOLS</span></code> takes an optional input <code class="docutils literal notranslate"><span class="pre">reweight</span></code> which uses GLS-like weighting when panels are unbalanced. In this dataset the panel is balanced and so using this option would have no effect. By default this is <code class="docutils literal notranslate"><span class="pre">False</span></code> and so the averages are directly used in OLS even when there are difference numbers of observations across entities.</p>
<h2 id="Handling-correlated-effects">Handling correlated effects<a class="headerlink" href="#Handling-correlated-effects" title="Link to this heading">¶</a></h2>
<p>When effects are correlated with the regressors the RE and BE estimators are not consistent. The usual solution is to use Fixed Effects which are available in <code class="docutils literal notranslate"><span class="pre">PanelOLS</span></code>. Fixed effects are called <code class="docutils literal notranslate"><span class="pre">entity_effects</span></code> when applied to entities and <code class="docutils literal notranslate"><span class="pre">time_effects</span></code> when applied to the time dimension:</p>
<h3 id="Including-fixed-effects">Including fixed effects<a class="headerlink" href="#Including-fixed-effects" title="Link to this heading">¶</a></h3>
<p>Entity effects are included by setting <code class="docutils literal notranslate"><span class="pre">entity_effects=True</span></code>. This is equivalent to including dummies for each entity. In this panel, this would add 545 dummy variables and estimation of the model would be considerably slower. <code class="docutils literal notranslate"><span class="pre">PanelOLS</span></code> does not actually use dummy variables and instead uses group-wise demeaning to achieve the same effect.</p>
<h4 id="Time-invariant-Variables">Time-invariant Variables<a class="headerlink" href="#Time-invariant-Variables" title="Link to this heading">¶</a></h4>
<p>Time-invariant variables cannot be included when using entity effects since, once demeaned, these will all be 0. Here <code class="docutils literal notranslate"><span class="pre">exper</span></code> is also excluded since once entity effects and time dummies are incorporated, <code class="docutils literal notranslate"><span class="pre">exper</span></code> is perfectly co-linear.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[7]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">PanelOLS</span>

<span class="n">exog_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;expersq&quot;</span><span class="p">,</span> <span class="s2">&quot;union&quot;</span><span class="p">,</span> <span class="s2">&quot;married&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">]</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">exog_vars</span><span class="p">])</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">PanelOLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">,</span> <span class="n">exog</span><span class="p">,</span> <span class="n">entity_effects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fe_res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fe_res</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                          PanelOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.1806
Estimator:                   PanelOLS   R-squared (Between):             -0.0052
No. Observations:                4360   R-squared (Within):               0.1806
Date:                Tue, Nov 07 2023   R-squared (Overall):              0.0807
Time:                        17:10:09   Log-likelihood                   -1324.8
Cov. Estimator:            Unadjusted
                                        F-statistic:                      83.851
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                 F(10,3805)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             83.851
                                        P-value                           0.0000
Time periods:                       8   Distribution:                 F(10,3805)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          1.4260     0.0183     77.748     0.0000      1.3901      1.4620
expersq       -0.0052     0.0007    -7.3612     0.0000     -0.0066     -0.0038
union          0.0800     0.0193     4.1430     0.0000      0.0421      0.1179
married        0.0467     0.0183     2.5494     0.0108      0.0108      0.0826
year.1981      0.1512     0.0219     6.8883     0.0000      0.1082      0.1942
year.1982      0.2530     0.0244     10.360     0.0000      0.2051      0.3008
year.1983      0.3544     0.0292     12.121     0.0000      0.2971      0.4118
year.1984      0.4901     0.0362     13.529     0.0000      0.4191      0.5611
year.1985      0.6175     0.0452     13.648     0.0000      0.5288      0.7062
year.1986      0.7655     0.0561     13.638     0.0000      0.6555      0.8755
year.1987      0.9250     0.0688     13.450     0.0000      0.7902      1.0599
==============================================================================

F-test for Poolability: 9.1568
P-value: 0.0000
Distribution: F(544,3805)

Included effects: Entity
</pre></div></div>
</div>
<h3 id="Time-Effects">Time Effects<a class="headerlink" href="#Time-Effects" title="Link to this heading">¶</a></h3>
<p>Time effect can be added using <code class="docutils literal notranslate"><span class="pre">time_effects=True</span></code>. Here the time dummies are removed. Note that the core coefficients are identical. The only change is in the test statistic for poolability since not the “effects” include both entity and time, whereas before only entity were included.</p>
<h4 id="Effects-vs-Dummies">Effects vs Dummies<a class="headerlink" href="#Effects-vs-Dummies" title="Link to this heading">¶</a></h4>
<p>For variable which can be consistently estimated, such as time effects in the usual large N, fixed T panel, it is not necessary to include these as effects. They can instead be implemented as dummy variables.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[8]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">exog_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;expersq&quot;</span><span class="p">,</span> <span class="s2">&quot;union&quot;</span><span class="p">,</span> <span class="s2">&quot;married&quot;</span><span class="p">]</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">exog_vars</span><span class="p">])</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">PanelOLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">,</span> <span class="n">exog</span><span class="p">,</span> <span class="n">entity_effects</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">time_effects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fe_te_res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fe_te_res</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                          PanelOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.0216
Estimator:                   PanelOLS   R-squared (Between):             -0.0052
No. Observations:                4360   R-squared (Within):              -0.4809
Date:                Tue, Nov 07 2023   R-squared (Overall):             -0.2253
Time:                        17:10:09   Log-likelihood                   -1324.8
Cov. Estimator:            Unadjusted
                                        F-statistic:                      27.959
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                  F(3,3805)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             27.959
                                        P-value                           0.0000
Time periods:                       8   Distribution:                  F(3,3805)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          1.8706     0.0378     49.430     0.0000      1.7964      1.9448
expersq       -0.0052     0.0007    -7.3612     0.0000     -0.0066     -0.0038
union          0.0800     0.0193     4.1430     0.0000      0.0421      0.1179
married        0.0467     0.0183     2.5494     0.0108      0.0108      0.0826
==============================================================================

F-test for Poolability: 10.067
P-value: 0.0000
Distribution: F(551,3805)

Included effects: Entity, Time
</pre></div></div>
</div>
<h4 id="Other-Options">Other Options<a class="headerlink" href="#Other-Options" title="Link to this heading">¶</a></h4>
<p>Some additional options are available when using <code class="docutils literal notranslate"><span class="pre">PanelOLS</span></code> and effects. The <code class="docutils literal notranslate"><span class="pre">use_lsdv</span></code> can be used to force the model to be estimated using dummy variables. This is not necessary and will be slower in most circumstances. This options is primarily included for testing. <code class="docutils literal notranslate"><span class="pre">auto_df</span></code> instructs <code class="docutils literal notranslate"><span class="pre">PanelOLS</span></code> to determine the degree of freedom adjustment to make. Unlike most other estimators, the treatment of effects depends on the covariance estimator. For example, when using a classic covariance
estimator, effects count as lost degrees of freedom. When using entity effects and clustering by entity, they do not. Setting <code class="docutils literal notranslate"><span class="pre">auto_df=False</span></code> will allow the entities to be counted or not, depending on the value of <code class="docutils literal notranslate"><span class="pre">count_effects</span></code>.</p>
<h3 id="Other-Effects">Other Effects<a class="headerlink" href="#Other-Effects" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">PanelOLS</span></code> can be used to estimated models with up to 2-effects fixed effects. These can include any combination of</p>
<ul class="simple">
<li><p>Entity effects</p></li>
<li><p>Time effects</p></li>
<li><p>Other effects</p></li>
</ul>
<p>Other effects are specified using the <code class="docutils literal notranslate"><span class="pre">other_effects</span></code> input of <code class="docutils literal notranslate"><span class="pre">PanelOLS</span></code>. The input should have the same number of observations as the <code class="docutils literal notranslate"><span class="pre">engog</span></code> and can have 1 or two columns. Below we reproduce the model fitted with time effects only using <code class="docutils literal notranslate"><span class="pre">other_effects</span></code> to set the effect.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[9]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">linearmodels.panel.data</span> <span class="kn">import</span> <span class="n">PanelData</span>

<span class="n">exog_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;expersq&quot;</span><span class="p">,</span> <span class="s2">&quot;union&quot;</span><span class="p">,</span> <span class="s2">&quot;married&quot;</span><span class="p">]</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">exog_vars</span><span class="p">])</span>
<span class="c1"># Use the `PanelData` structure to simplify constructing the time IDs</span>
<span class="n">time_ids</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">PanelData</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">)</span><span class="o">.</span><span class="n">time_ids</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Other Effect&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">mod</span> <span class="o">=</span> <span class="n">PanelOLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">,</span> <span class="n">exog</span><span class="p">,</span> <span class="n">entity_effects</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">other_effects</span><span class="o">=</span><span class="n">time_ids</span><span class="p">)</span>
<span class="n">fe_oe_res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fe_oe_res</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                          PanelOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.0216
Estimator:                   PanelOLS   R-squared (Between):             -0.0052
No. Observations:                4360   R-squared (Within):              -0.4809
Date:                Tue, Nov 07 2023   R-squared (Overall):             -0.2253
Time:                        17:10:09   Log-likelihood                   -1324.8
Cov. Estimator:            Unadjusted
                                        F-statistic:                      27.959
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                  F(3,3805)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             27.959
                                        P-value                           0.0000
Time periods:                       8   Distribution:                  F(3,3805)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const          1.8706     0.0378     49.430     0.0000      1.7964      1.9448
expersq       -0.0052     0.0007    -7.3612     0.0000     -0.0066     -0.0038
union          0.0800     0.0193     4.1430     0.0000      0.0421      0.1179
married        0.0467     0.0183     2.5494     0.0108      0.0108      0.0826
==============================================================================

F-test for Poolability: 10.067
P-value: 0.0000
Distribution: F(551,3805)

Included effects: Entity, Other Effect (Other Effect)
Model includes 1 other effect
Other Effect Observations per group (Other Effect):
Avg Obs: 545.00, Min Obs: 545.00, Max Obs: 545.00, Groups: 8
</pre></div></div>
</div>
<h3 id="Using-first-differences">Using first differences<a class="headerlink" href="#Using-first-differences" title="Link to this heading">¶</a></h3>
<p>First differencing is an alternative to using fixed effects when there might be correlation. When using first differences, time-invariant variables must be excluded. Additionally, only one linear time-trending variable can be included since this will look like a constant. This variable will soak up all time-trends in the data, and so interpretations of these variable can be challenging.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[10]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">FirstDifferenceOLS</span>

<span class="n">exog_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;exper&quot;</span><span class="p">,</span> <span class="s2">&quot;expersq&quot;</span><span class="p">,</span> <span class="s2">&quot;union&quot;</span><span class="p">,</span> <span class="s2">&quot;married&quot;</span><span class="p">]</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">exog_vars</span><span class="p">]</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">FirstDifferenceOLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">,</span> <span class="n">exog</span><span class="p">)</span>
<span class="n">fd_res</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fd_res</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                     FirstDifferenceOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.0268
Estimator:         FirstDifferenceOLS   R-squared (Between):              0.5491
No. Observations:                3815   R-squared (Within):               0.1763
Date:                Tue, Nov 07 2023   R-squared (Overall):              0.5328
Time:                        17:10:09   Log-likelihood                   -2305.5
Cov. Estimator:            Unadjusted
                                        F-statistic:                      26.208
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                  F(4,3811)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             26.208
                                        P-value                           0.0000
Time periods:                       8   Distribution:                  F(4,3811)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
exper          0.1158     0.0196     5.9096     0.0000      0.0773      0.1542
expersq       -0.0039     0.0014    -2.8005     0.0051     -0.0066     -0.0012
union          0.0428     0.0197     2.1767     0.0296      0.0042      0.0813
married        0.0381     0.0229     1.6633     0.0963     -0.0068      0.0831
==============================================================================
</pre></div></div>
</div>
<h2 id="Comparing-models">Comparing models<a class="headerlink" href="#Comparing-models" title="Link to this heading">¶</a></h2>
<p>Model results can be compared using <code class="docutils literal notranslate"><span class="pre">compare</span></code>. <code class="docutils literal notranslate"><span class="pre">compare</span></code> accepts lists of results, a dictionary of results where the key is interpreted as the model name.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[11]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">linearmodels.panel</span> <span class="kn">import</span> <span class="n">compare</span>

<span class="nb">print</span><span class="p">(</span><span class="n">compare</span><span class="p">({</span><span class="s2">&quot;BE&quot;</span><span class="p">:</span> <span class="n">be_res</span><span class="p">,</span> <span class="s2">&quot;RE&quot;</span><span class="p">:</span> <span class="n">re_res</span><span class="p">,</span> <span class="s2">&quot;Pooled&quot;</span><span class="p">:</span> <span class="n">pooled_res</span><span class="p">}))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                        Model Comparison
===============================================================
                                BE              RE       Pooled
---------------------------------------------------------------
Dep. Variable                lwage           lwage        lwage
Estimator               BetweenOLS   RandomEffects    PooledOLS
No. Observations               545            4360         4360
Cov. Est.               Unadjusted      Unadjusted   Unadjusted
R-squared                   0.2155          0.1806       0.1893
R-Squared (Within)          0.1141          0.1799       0.1692
R-Squared (Between)         0.2155          0.1853       0.2066
R-Squared (Overall)         0.1686          0.1828       0.1893
F-statistic                 24.633          68.409       72.459
P-value (F-stat)            0.0000          0.0000       0.0000
===================== ============ =============== ============
const                       0.2836          0.0234       0.0921
                          (1.5897)        (0.1546)     (1.1761)
black                      -0.1414         -0.1394      -0.1392
                         (-2.8915)       (-2.9054)    (-5.9049)
hisp                        0.0100          0.0217       0.0160
                          (0.2355)        (0.5078)     (0.7703)
exper                       0.0278          0.1058       0.0672
                          (2.4538)        (6.8706)     (4.9095)
married                     0.1416          0.0638       0.1083
                          (3.4346)        (3.8035)     (6.8997)
educ                        0.0913          0.0919       0.0913
                          (8.5159)        (8.5744)     (17.442)
union                       0.2587          0.1059       0.1825
                          (5.6214)        (5.9289)     (10.635)
expersq                                    -0.0047      -0.0024
                                         (-6.8623)    (-2.9413)
year.1981                                   0.0404       0.0583
                                          (1.6362)     (1.9214)
year.1982                                   0.0309       0.0628
                                          (0.9519)     (1.8900)
year.1983                                   0.0202       0.0620
                                          (0.4840)     (1.6915)
year.1984                                   0.0430       0.0905
                                          (0.8350)     (2.2566)
year.1985                                   0.0577       0.1092
                                          (0.9383)     (2.5200)
year.1986                                   0.0918       0.1420
                                          (1.2834)     (3.0580)
year.1987                                   0.1348       0.1738
                                          (1.6504)     (3.5165)
---------------------------------------------------------------

T-stats reported in parentheses
</pre></div></div>
</div>
<h2 id="Covariance-options">Covariance options<a class="headerlink" href="#Covariance-options" title="Link to this heading">¶</a></h2>
<h3 id="Heteroskedasticity-Robust-Covariance">Heteroskedasticity Robust Covariance<a class="headerlink" href="#Heteroskedasticity-Robust-Covariance" title="Link to this heading">¶</a></h3>
<p>White”s robust covariance can be used by setting <code class="docutils literal notranslate"><span class="pre">cov_type=&quot;robust</span></code>. This estimator adds some robustness against certain types of specification issues but should not be used when using fixed effects (entity effects) since it is no longer robust. Instead a clustered covariance is required.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[12]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">exog_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;hisp&quot;</span><span class="p">,</span> <span class="s2">&quot;exper&quot;</span><span class="p">,</span> <span class="s2">&quot;expersq&quot;</span><span class="p">,</span> <span class="s2">&quot;married&quot;</span><span class="p">,</span> <span class="s2">&quot;educ&quot;</span><span class="p">,</span> <span class="s2">&quot;union&quot;</span><span class="p">]</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">exog_vars</span><span class="p">])</span>
<span class="n">mod</span> <span class="o">=</span> <span class="n">PooledOLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">lwage</span><span class="p">,</span> <span class="n">exog</span><span class="p">)</span>
<span class="n">robust</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;robust&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<h3 id="Clustered-by-Entity">Clustered by Entity<a class="headerlink" href="#Clustered-by-Entity" title="Link to this heading">¶</a></h3>
<p>The usual variable to cluster are are entity or entity and time. The can be implemented using <code class="docutils literal notranslate"><span class="pre">cov_type=&quot;clustered&quot;</span></code> and the additional keyword arguments <code class="docutils literal notranslate"><span class="pre">cluster_entity=True</span></code> and/or <code class="docutils literal notranslate"><span class="pre">cluster_time=True</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[13]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">clust_entity</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;clustered&quot;</span><span class="p">,</span> <span class="n">cluster_entity</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<p>This next example clusters by both.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[14]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">clust_entity_time</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
    <span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;clustered&quot;</span><span class="p">,</span> <span class="n">cluster_entity</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cluster_time</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</code></pre></div>
</div>
</div>
<p>An <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> is used to hold the results for comparing models. This allows the models to be named as well as for the order of the models to be specified. A standard <code class="docutils literal notranslate"><span class="pre">dict</span></code> will produce effectively random order.</p>
<p>Clustering on entity reduced the t-stats across the board. This suggests there is important correlation in the residuals per entity. Clustering by both also decreases the t-stats which suggests that there is cross-sectional dependence in the data. <em>Note</em>: clustering by entity addresses correlation across time and clustering by time controls for correlation between entities in a time period.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[15]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;Robust&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">robust</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;Entity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clust_entity</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;Entity-Time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clust_entity_time</span>
<span class="nb">print</span><span class="p">(</span><span class="n">compare</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                     Model Comparison
=========================================================
                           Robust      Entity Entity-Time
---------------------------------------------------------
Dep. Variable               lwage       lwage       lwage
Estimator               PooledOLS   PooledOLS   PooledOLS
No. Observations             4360        4360        4360
Cov. Est.                  Robust   Clustered   Clustered
R-squared                  0.1866      0.1866      0.1866
R-Squared (Within)         0.1679      0.1679      0.1679
R-Squared (Between)        0.2027      0.2027      0.2027
R-Squared (Overall)        0.1866      0.1866      0.1866
F-statistic                142.61      142.61      142.61
P-value (F-stat)           0.0000      0.0000      0.0000
===================== =========== =========== ===========
const                     -0.0347     -0.0347     -0.0347
                        (-0.5360)   (-0.2892)   (-0.3145)
black                     -0.1438     -0.1438     -0.1438
                        (-5.9045)   (-2.8727)   (-3.0067)
hisp                       0.0157      0.0157      0.0157
                         (0.7952)    (0.4008)    (0.4428)
exper                      0.0892      0.0892      0.0892
                         (8.7881)    (7.1728)    (6.3223)
expersq                   -0.0028     -0.0028     -0.0028
                        (-4.1934)   (-3.2747)   (-3.1571)
married                    0.1077      0.1077      0.1077
                         (7.0525)    (4.1314)    (4.8989)
educ                       0.0994      0.0994      0.0994
                         (21.626)    (10.802)    (12.296)
union                      0.1801      0.1801      0.1801
                         (11.087)    (6.5343)    (6.6732)
---------------------------------------------------------

T-stats reported in parentheses
</pre></div></div>
</div>
<h3 id="Other-clusters">Other clusters<a class="headerlink" href="#Other-clusters" title="Link to this heading">¶</a></h3>
<p>Other clusters can be used by directly passing integer arrays (1 or 2 columns, or a 1-d array) using the input <code class="docutils literal notranslate"><span class="pre">clusters</span></code>. This example clustered by occupation, which is probably not a reliable variable to cluster on since there are only 9 groups and the usual theory for clustered standard errors requires that the number of clusters is large.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[16]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">clust_entity</span> <span class="o">=</span> <span class="n">mod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;clustered&quot;</span><span class="p">,</span> <span class="n">clusters</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">occupation</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">occupation</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">clust_entity</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
occupation
5    934
6    881
9    509
4    486
1    453
7    401
2    399
3    233
8     64
Name: count, dtype: int64
                          PooledOLS Estimation Summary
================================================================================
Dep. Variable:                  lwage   R-squared:                        0.1866
Estimator:                  PooledOLS   R-squared (Between):              0.2027
No. Observations:                4360   R-squared (Within):               0.1679
Date:                Tue, Nov 07 2023   R-squared (Overall):              0.1866
Time:                        17:10:10   Log-likelihood                   -2989.2
Cov. Estimator:             Clustered
                                        F-statistic:                      142.61
Entities:                         545   P-value                           0.0000
Avg Obs:                       8.0000   Distribution:                  F(7,4352)
Min Obs:                       8.0000
Max Obs:                       8.0000   F-statistic (robust):             116.58
                                        P-value                           0.0000
Time periods:                       8   Distribution:                  F(7,4352)
Avg Obs:                       545.00
Min Obs:                       545.00
Max Obs:                       545.00

                             Parameter Estimates
==============================================================================
            Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
------------------------------------------------------------------------------
const         -0.0347     0.1479    -0.2346     0.8145     -0.3247      0.2553
black         -0.1438     0.0297    -4.8469     0.0000     -0.2020     -0.0857
hisp           0.0157     0.0266     0.5892     0.5557     -0.0365      0.0679
exper          0.0892     0.0134     6.6513     0.0000      0.0629      0.1155
expersq       -0.0028     0.0009    -3.2442     0.0012     -0.0046     -0.0011
married        0.1077     0.0139     7.7322     0.0000      0.0804      0.1350
educ           0.0994     0.0112     8.8846     0.0000      0.0775      0.1213
union          0.1801     0.0320     5.6323     0.0000      0.1174      0.2428
==============================================================================
</pre></div></div>
</div>






                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="data-formats.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Data Formats for Panel Data Analysis" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Data Formats for Panel Data Analysis
            </div>
          </div>
        </a>
      
      
        
        <a href="using-formulas.html" class="md-footer__link md-footer__link--next" aria-label="Next: Using formulas to specify models" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Using formulas to specify models
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2021, Kevin Sheppard.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    7.2.6.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/bashtage/linearmodels" target="_blank" rel="noopener" title="Source on github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://pypi.org/project/linearmodels/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://doi.org/10.5281/zenodo.2591973" target="_blank" rel="noopener" title="doi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 216C0 149.7 53.7 96 120 96h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V216zm256 0c0-66.3 53.7-120 120-120h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-64c-35.3 0-64-28.7-64-64V216z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike", "staticVersions": [{"aliases": [], "title": "Release", "version": "https://bashtage.github.io/linearmodels"}, {"aliases": [], "title": "Development", "version": "https://bashtage.github.io/linearmodels/devel"}], "versionPath": null}}</script>
    
      
        <script src="../../_static/sphinx_immaterial_theme.1b5b7a2d5891aec19.min.js?v=1e7b0789"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script id="MathJax-script" src="../../_static/mathjax/tex-mml-chtml.js?v=cadf963e"></script>
    
  </body>
</html>