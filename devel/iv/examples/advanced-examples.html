


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../_static/favicon.ico">
    
    
  
      
        <title>Further Examples - linearmodels v4.31 (+5)</title>
      
    

  <link rel="apple-touch-icon" sizes="180x180" href="../../_static/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../_static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../_static/icons/favicon-16x16.png">
  <link rel="manifest" href="../../_static/icons/site.webmanifest">
  <link rel="mask-icon" href="../../_static/icons/safari-pinned-tab.svg" color="#2196f3">
  <link rel="shortcut icon" href="../../_static/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#f8f8f8">
  <meta name="msapplication-config" content="../../_static/icons/browserconfig.xml">

    
      
        
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../../_static/sphinx_immaterial_theme.8118e13f191069ea1.min.css" />
        <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />
        <link rel="stylesheet" type="text/css" href="../../_static/css/small_fixes.css" />
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#Linear-Instrumental-Variables-Regression" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="linearmodels v4.31 (+5)" class="md-header__button md-logo" aria-label="linearmodels v4.31 (+5)" data-md-component="logo">
      <img src="../../_static/bw-logo.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            linearmodels v4.31 (+5)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Further Examples
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/bashtage/linearmodels/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    linearmodels
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="linearmodels v4.31 (+5)" class="md-nav__button md-logo" aria-label="linearmodels v4.31 (+5)" data-md-component="logo">
      <img src="../../_static/bw-logo.svg" alt="logo">
    </a>
    linearmodels v4.31 (+5)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bashtage/linearmodels/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    linearmodels
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../index.html"><span title="/iv/index.rst (reference label)" class="md-ellipsis">Instrumental Variable Estimation</span></a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Instrumental Variable Estimation" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          <span title="/iv/index.rst (reference label)" class="md-ellipsis">Instrumental Variable Estimation</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction.html" class="md-nav__link">
        <span title="/iv/introduction.rst (reference label)" class="md-ellipsis">Introduction</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="basic-examples.html" class="md-nav__link">
        <span title="/iv/examples/basic-examples.ipynb (reference label)" class="md-ellipsis">Basic Examples</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span title="/iv/examples/advanced-examples.ipynb (reference label)" class="md-ellipsis">Further Examples</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span title="/iv/examples/advanced-examples.ipynb (reference label)" class="md-ellipsis">Further Examples</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Linear-Instrumental-Variables-Regression" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#linear-instrumental-variables-regression (reference label)" class="md-ellipsis">Linear Instrumental-<wbr>Variables Regression</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Importing-data" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#importing-data (reference label)" class="md-ellipsis">Importing data</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2SLS-as-OLS" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#2sls-as-ols (reference label)" class="md-ellipsis">2SLS as OLS</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Just-identified-2SLS" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#just-identified-2sls (reference label)" class="md-ellipsis">Just identified 2SLS</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Multiple-Instruments" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#multiple-instruments (reference label)" class="md-ellipsis">Multiple Instruments</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Alternative-covariance-estimators" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#alternative-covariance-estimators (reference label)" class="md-ellipsis">Alternative covariance estimators</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#GMM-Estimation" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#gmm-estimation (reference label)" class="md-ellipsis">GMM Estimation</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Changing-the-weighting-matrix-structure-in-GMM-estimation" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#changing-the-weighting-matrix-structure-in-gmm-estimation (reference label)" class="md-ellipsis">Changing the weighting matrix structure in GMM estimation</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Continuously-updating-GMM" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#continuously-updating-gmm (reference label)" class="md-ellipsis">Continuously updating GMM</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Comparing-results" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#comparing-results (reference label)" class="md-ellipsis">Comparing results</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Testing-endogeneity" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#testing-endogeneity (reference label)" class="md-ellipsis">Testing endogeneity</span>
  </a>
  
    <nav class="md-nav" aria-label="Testing endogeneity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Exogeneity-Testing" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#exogeneity-testing (reference label)" class="md-ellipsis">Exogeneity Testing</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Single-Instrument-Regressions" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#single-instrument-regressions (reference label)" class="md-ellipsis">Single Instrument Regressions</span>
  </a>
  
    <nav class="md-nav" aria-label="Single Instrument Regressions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#First-Stage-Diagnostics" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#first-stage-diagnostics (reference label)" class="md-ellipsis">First Stage Diagnostics</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#LIML" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#liml (reference label)" class="md-ellipsis">LIML</span>
  </a>
  
    <nav class="md-nav" aria-label="LIML">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#IV2SLS-as-OLS" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#iv2sls-as-ols (reference label)" class="md-ellipsis">IV2SLS as OLS</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="using-formulas.html" class="md-nav__link">
        <span title="/iv/examples/using-formulas.ipynb (reference label)" class="md-ellipsis">Using formulas to specify models</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="absorbing-regression.html" class="md-nav__link">
        <span title="/iv/examples/absorbing-regression.ipynb (reference label)" class="md-ellipsis">Absorbing Regression</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference.html" class="md-nav__link">
        <span title="/iv/reference.rst (reference label)" class="md-ellipsis">Module Reference</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../mathematical-formula.html" class="md-nav__link">
        <span title="/iv/mathematical-formula.rst (reference label)" class="md-ellipsis">Formulas and Mathematical Detail</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../panel/index.html" class="md-nav__link">
        <span title="/panel/index.rst (reference label)" class="md-ellipsis">Panel Data Model Estimation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../asset-pricing/index.html" class="md-nav__link">
        <span title="/asset-pricing/index.rst (reference label)" class="md-ellipsis">Linear Factor Models for Asset Pricing</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../system/index.html" class="md-nav__link">
        <span title="/system/index.rst (reference label)" class="md-ellipsis">System Regression Models</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../utility.html" class="md-nav__link">
        <span title="/utility.rst (reference label)" class="md-ellipsis">Utilities</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility.html" class="md-nav__link">
        <span title="/compatibility.rst (reference label)" class="md-ellipsis">Compatibility</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../plan.html" class="md-nav__link">
        <span title="/plan.rst (reference label)" class="md-ellipsis">Module Plans</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing.html" class="md-nav__link">
        <span title="/contributing.rst (reference label)" class="md-ellipsis">Contributing</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../changes.html" class="md-nav__link">
        <span title="/changes.rst (reference label)" class="md-ellipsis">Change Log</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../../references.html" class="md-nav__link">
        <span title="/references.rst (reference label)" class="md-ellipsis">References</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#Linear-Instrumental-Variables-Regression" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#linear-instrumental-variables-regression (reference label)" class="md-ellipsis">Linear Instrumental-<wbr>Variables Regression</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Importing-data" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#importing-data (reference label)" class="md-ellipsis">Importing data</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2SLS-as-OLS" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#2sls-as-ols (reference label)" class="md-ellipsis">2SLS as OLS</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Just-identified-2SLS" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#just-identified-2sls (reference label)" class="md-ellipsis">Just identified 2SLS</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Multiple-Instruments" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#multiple-instruments (reference label)" class="md-ellipsis">Multiple Instruments</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Alternative-covariance-estimators" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#alternative-covariance-estimators (reference label)" class="md-ellipsis">Alternative covariance estimators</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#GMM-Estimation" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#gmm-estimation (reference label)" class="md-ellipsis">GMM Estimation</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Changing-the-weighting-matrix-structure-in-GMM-estimation" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#changing-the-weighting-matrix-structure-in-gmm-estimation (reference label)" class="md-ellipsis">Changing the weighting matrix structure in GMM estimation</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Continuously-updating-GMM" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#continuously-updating-gmm (reference label)" class="md-ellipsis">Continuously updating GMM</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Comparing-results" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#comparing-results (reference label)" class="md-ellipsis">Comparing results</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Testing-endogeneity" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#testing-endogeneity (reference label)" class="md-ellipsis">Testing endogeneity</span>
  </a>
  
    <nav class="md-nav" aria-label="Testing endogeneity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#Exogeneity-Testing" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#exogeneity-testing (reference label)" class="md-ellipsis">Exogeneity Testing</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#Single-Instrument-Regressions" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#single-instrument-regressions (reference label)" class="md-ellipsis">Single Instrument Regressions</span>
  </a>
  
    <nav class="md-nav" aria-label="Single Instrument Regressions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#First-Stage-Diagnostics" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#first-stage-diagnostics (reference label)" class="md-ellipsis">First Stage Diagnostics</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#LIML" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#liml (reference label)" class="md-ellipsis">LIML</span>
  </a>
  
    <nav class="md-nav" aria-label="LIML">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#IV2SLS-as-OLS" class="md-nav__link">
    <span title="/iv/examples/advanced-examples.ipynb#iv2sls-as-ols (reference label)" class="md-ellipsis">IV2SLS as OLS</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="Further-Examples">Further Examples<a class="headerlink" href="#Further-Examples" title="Permalink to this heading">¶</a></h1>
<h2 id="Linear-Instrumental-Variables-Regression">Linear Instrumental-Variables Regression<a class="headerlink" href="#Linear-Instrumental-Variables-Regression" title="Permalink to this heading">¶</a></h2>
<p>These examples follow those in <strong>Chapter 6</strong> of <em>Microeconometrics Using Stata</em> by Cameron &amp; Trivedi.</p>
<p>The first step is to import the main estimator for linear IV models:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IV2SLS</span></code> - standard two-stage least squares</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IVLIML</span></code> - Limited information maximum likelihood and k-class estimators</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IVGMM</span></code> - Generalized method of moment estimation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IVGMMCUE</span></code> - Generalized method of moment estimation using continuously updating</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[1]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">linearmodels</span> <span class="kn">import</span> <span class="n">IV2SLS</span><span class="p">,</span> <span class="n">IVGMM</span><span class="p">,</span> <span class="n">IVGMMCUE</span><span class="p">,</span> <span class="n">IVLIML</span>
</code></pre></div>
</div>
</div>
<h2 id="Importing-data">Importing data<a class="headerlink" href="#Importing-data" title="Permalink to this heading">¶</a></h2>
<p>The data uses comes from the Medical Expenditure Panel Survey (MEPS) and includes data on out-of-pocket drug expenditure (in logs), individual characteristics, whether an individual was insured through an employer or union (a likely endogenous variable), and some candidate instruments including the percentage of income from Social Security Income, the size of the individual”s firm and whether the firm has multiple locations.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[2]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">linearmodels.datasets</span> <span class="kn">import</span> <span class="n">meps</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">meps</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">meps</span><span class="o">.</span><span class="n">DESCR</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

age               Age
age2              Age-squared
black             Black
blhisp            Black or Hispanic
drugexp           Presc-drugs expense
educyr            Years of education
fair              Fair health
female            Female
firmsz            Firm size
fph               fair or poor health
good              Good health
hi_empunion       Insured thro emp/union
hisp              Hiapanic
income            Income
ldrugexp          log(drugexp)
linc              log(income)
lowincome         Low income
marry             Married
midincome         Middle income
msa               Metropolitan stat area
multlc            Multiple locations
poor              Poor health
poverty           Poor
priolist          Priority list cond
private           Private insurance
ssiratio          SSI/Income ratio
totchr            Total chronic cond
vegood            V-good health
vgh               vg or good health

</pre></div></div>
</div>
<p>Next the data – dependent, endogenous and controls – are summarized. The controls are grouped into a list to simplify model building.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[3]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;totchr&quot;</span><span class="p">,</span> <span class="s2">&quot;female&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="s2">&quot;linc&quot;</span><span class="p">,</span> <span class="s2">&quot;blhisp&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[[</span><span class="s2">&quot;ldrugexp&quot;</span><span class="p">,</span> <span class="s2">&quot;hi_empunion&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">controls</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[]))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
           ldrugexp   hi_empunion        totchr        female           age
count  10089.000000  10089.000000  10089.000000  10089.000000  10089.000000  \
mean       6.481361      0.382198      1.860938      0.577064     75.051740
std        1.362052      0.485949      1.292858      0.494050      6.682109
min        0.000000      0.000000      0.000000      0.000000     65.000000
50%        6.678342      0.000000      2.000000      1.000000     74.000000
max       10.180172      1.000000      9.000000      1.000000     91.000000

               linc        blhisp
count  10089.000000  10089.000000
mean       2.743275      0.163544
std        0.913143      0.369880
min       -6.907755      0.000000
50%        2.743160      0.000000
max        5.744476      1.000000
</pre></div></div>
</div>
<p>It is also worth examining the instruments.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[4]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">instruments</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ssiratio&quot;</span><span class="p">,</span> <span class="s2">&quot;lowincome&quot;</span><span class="p">,</span> <span class="s2">&quot;multlc&quot;</span><span class="p">,</span> <span class="s2">&quot;firmsz&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">instruments</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[]))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
           ssiratio     lowincome        multlc        firmsz
count  10089.000000  10089.000000  10089.000000  10089.000000
mean       0.536544      0.187432      0.062048      0.140529
std        0.367818      0.390277      0.241254      2.170389
min        0.000000      0.000000      0.000000      0.000000
50%        0.504522      0.000000      0.000000      0.000000
max        9.250620      1.000000      1.000000     50.000000
</pre></div></div>
</div>
<p>And finally the simple correlation between the endogenous variable and the instruments. Instruments must be correlated to be relevant (but also must be exogenous, which can”t be examined using simple correlation). The correlation of <code class="docutils literal notranslate"><span class="pre">firmsz</span></code> is especially low, which might lead to the weak instruments problem if used exclusively.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[5]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">data</span><span class="p">[[</span><span class="s2">&quot;hi_empunion&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">instruments</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[5]:
</code></pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>hi_empunion</th>
      <th>ssiratio</th>
      <th>lowincome</th>
      <th>multlc</th>
      <th>firmsz</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>hi_empunion</th>
      <td>1.000000</td>
      <td>-0.212431</td>
      <td>-0.116419</td>
      <td>0.119849</td>
      <td>0.037352</td>
    </tr>
    <tr>
      <th>ssiratio</th>
      <td>-0.212431</td>
      <td>1.000000</td>
      <td>0.253946</td>
      <td>-0.190433</td>
      <td>-0.044578</td>
    </tr>
    <tr>
      <th>lowincome</th>
      <td>-0.116419</td>
      <td>0.253946</td>
      <td>1.000000</td>
      <td>-0.062465</td>
      <td>-0.008232</td>
    </tr>
    <tr>
      <th>multlc</th>
      <td>0.119849</td>
      <td>-0.190433</td>
      <td>-0.062465</td>
      <td>1.000000</td>
      <td>0.187275</td>
    </tr>
    <tr>
      <th>firmsz</th>
      <td>0.037352</td>
      <td>-0.044578</td>
      <td>-0.008232</td>
      <td>0.187275</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">add_constant</span></code> from <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> is used to simplify the process of adding a constant column to the data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[6]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">statsmodels.api</span> <span class="kn">import</span> <span class="n">OLS</span><span class="p">,</span> <span class="n">add_constant</span>

<span class="n">data</span><span class="p">[</span><span class="s2">&quot;const&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;const&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">controls</span>
</code></pre></div>
</div>
</div>
<h2 id="2SLS-as-OLS">2SLS as OLS<a class="headerlink" href="#2SLS-as-OLS" title="Permalink to this heading">¶</a></h2>
<p>Before examining the IV estimators, it is worth noting that 2SLS nests the OLS estimator, so that a call to <code class="docutils literal notranslate"><span class="pre">IV2SLS</span></code> using <code class="docutils literal notranslate"><span class="pre">None</span></code> for the endogenous and instruments will produce OLS estimates of parameters.</p>
<p>The OLS estimates indicate that insurance through an employer or union leads to an <strong>increase</strong> in out-of-pocket drug expenditure.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[7]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivolsmod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;hi_empunion&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">controls</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">res_ols</span> <span class="o">=</span> <span class="n">ivolsmod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res_ols</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                            OLS Estimation Summary
==============================================================================
Dep. Variable:               ldrugexp   R-squared:                      0.1770
Estimator:                        OLS   Adj. R-squared:                 0.1765
No. Observations:               10089   F-statistic:                    2262.6
Date:                Fri, Apr 28 2023   P-value (F-stat)                0.0000
Time:                        09:51:33   Distribution:                  chi2(6)
Cov. Estimator:                robust

                              Parameter Estimates
===============================================================================
             Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
-------------------------------------------------------------------------------
hi_empunion     0.0739     0.0260     2.8441     0.0045      0.0230      0.1248
const           5.8611     0.1570     37.320     0.0000      5.5533      6.1689
totchr          0.4404     0.0094     47.049     0.0000      0.4220      0.4587
female          0.0578     0.0254     2.2797     0.0226      0.0081      0.1075
age            -0.0035     0.0019    -1.8228     0.0683     -0.0073      0.0003
linc            0.0105     0.0137     0.7646     0.4445     -0.0164      0.0373
blhisp         -0.1513     0.0341    -4.4353     0.0000     -0.2182     -0.0844
===============================================================================
</pre></div></div>
</div>
<h2 id="Just-identified-2SLS">Just identified 2SLS<a class="headerlink" href="#Just-identified-2SLS" title="Permalink to this heading">¶</a></h2>
<p>The just identified two-stage LS estimator uses as many instruments as endogenous variables. In this example there is one of each, using the SSI ratio as the instrument. The with the instrument, the effect of insurance through employer or union has a strong negative effect on drug expenditure.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[8]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">ssiratio</span><span class="p">)</span>
<span class="n">res_2sls</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res_2sls</span><span class="o">.</span><span class="n">summary</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                          IV-2SLS Estimation Summary
==============================================================================
Dep. Variable:               ldrugexp   R-squared:                      0.0640
Estimator:                    IV-2SLS   Adj. R-squared:                 0.0634
No. Observations:               10089   F-statistic:                    2000.9
Date:                Fri, Apr 28 2023   P-value (F-stat)                0.0000
Time:                        09:51:33   Distribution:                  chi2(6)
Cov. Estimator:                robust

                              Parameter Estimates
===============================================================================
             Parameter  Std. Err.     T-stat    P-value    Lower CI    Upper CI
-------------------------------------------------------------------------------
const           6.7872     0.2688     25.246     0.0000      6.2602      7.3141
totchr          0.4503     0.0102     44.157     0.0000      0.4303      0.4703
female         -0.0204     0.0326    -0.6257     0.5315     -0.0843      0.0435
age            -0.0132     0.0030    -4.4092     0.0000     -0.0191     -0.0073
linc            0.0870     0.0226     3.8436     0.0001      0.0426      0.1314
blhisp         -0.2174     0.0395    -5.5052     0.0000     -0.2948     -0.1400
hi_empunion    -0.8976     0.2211    -4.0592     0.0000     -1.3310     -0.4642
===============================================================================

Endogenous: hi_empunion
Instruments: ssiratio
Robust Covariance (Heteroskedastic)
Debiased: False
</pre></div></div>
</div>
<h2 id="Multiple-Instruments">Multiple Instruments<a class="headerlink" href="#Multiple-Instruments" title="Permalink to this heading">¶</a></h2>
<p>Using multiple instruments only requires expanding the data array in the instruments input.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[9]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span>
    <span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;ssiratio&quot;</span><span class="p">,</span> <span class="s2">&quot;multlc&quot;</span><span class="p">]]</span>
<span class="p">)</span>
<span class="n">res_2sls_robust</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<h2 id="Alternative-covariance-estimators">Alternative covariance estimators<a class="headerlink" href="#Alternative-covariance-estimators" title="Permalink to this heading">¶</a></h2>
<p>All estimator allow for three types of parameter covariance estimator:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;unadjusted&quot;</span></code> is the classic homoskedastic estimator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;robust&quot;</span></code> is robust to heteroskedasticity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;clustered&quot;</span></code> allows one- or two-way clustering to account for additional sources of dependence between the model scores</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;kernel&quot;</span></code> produces a heteroskedasticity-autocorrelation robust covariance estimator</p></li>
</ul>
<p>The default is <code class="docutils literal notranslate"><span class="pre">&quot;robust&quot;</span></code>.</p>
<p>These are all passed using the keyword input <code class="docutils literal notranslate"><span class="pre">cov_type</span></code>. Using clustered requires also passing the clustering variable(s).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[10]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span>
    <span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;ssiratio&quot;</span><span class="p">,</span> <span class="s2">&quot;multlc&quot;</span><span class="p">]]</span>
<span class="p">)</span>
<span class="n">res_2sls_std</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;unadjusted&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<h2 id="GMM-Estimation">GMM Estimation<a class="headerlink" href="#GMM-Estimation" title="Permalink to this heading">¶</a></h2>
<p>GMM estimation can be more efficient than 2SLS when there are more than one instrument. By default, 2-step efficient GMM is used (assuming the weighting matrix is correctly specified). It is possible to iterate until convergence using the optional keyword input <code class="docutils literal notranslate"><span class="pre">iter_limit</span></code>, which is naturally 2 by default. Generally, GMM-CUE would be preferred to using multiple iterations of standard GMM.</p>
<p>The default weighting matrix is robust to heteroskedasticity (but not clustering).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[11]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IVGMM</span><span class="p">(</span>
    <span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;ssiratio&quot;</span><span class="p">,</span> <span class="s2">&quot;multlc&quot;</span><span class="p">]]</span>
<span class="p">)</span>
<span class="n">res_gmm</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<h2 id="Changing-the-weighting-matrix-structure-in-GMM-estimation">Changing the weighting matrix structure in GMM estimation<a class="headerlink" href="#Changing-the-weighting-matrix-structure-in-GMM-estimation" title="Permalink to this heading">¶</a></h2>
<p>The weighting matrix in the GMM objective function can be altered when creating the model. This example uses clustered weight by age. The covariance estimator should usually match the weighting matrix, and so clustering is also used here.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[12]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IVGMM</span><span class="p">(</span>
    <span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span>
    <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span>
    <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span>
    <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;ssiratio&quot;</span><span class="p">,</span> <span class="s2">&quot;multlc&quot;</span><span class="p">]],</span>
    <span class="n">weight_type</span><span class="o">=</span><span class="s2">&quot;clustered&quot;</span><span class="p">,</span>
    <span class="n">clusters</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">age</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">res_gmm_clustered</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;clustered&quot;</span><span class="p">,</span> <span class="n">clusters</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">age</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<h2 id="Continuously-updating-GMM">Continuously updating GMM<a class="headerlink" href="#Continuously-updating-GMM" title="Permalink to this heading">¶</a></h2>
<p>The continuously updating GMM estimator simultaneously optimizes the moment conditions and the weighting matrix. It can be more efficient (in the second order sense) than standard 2-step GMM, although it can also be fragile. Here the optional input <code class="docutils literal notranslate"><span class="pre">display</span></code> is used to produce the output of the non-linear optimizer used to estimate the parameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[13]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IVGMMCUE</span><span class="p">(</span>
    <span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;ssiratio&quot;</span><span class="p">,</span> <span class="s2">&quot;multlc&quot;</span><span class="p">]]</span>
<span class="p">)</span>
<span class="n">res_gmm_cue</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;robust&quot;</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Warning: Desired error not necessarily achieved due to precision loss.
         Current function value: 1.045365
         Iterations: 10
         Function evaluations: 412
         Gradient evaluations: 50
</pre></div></div>
</div>
<h2 id="Comparing-results">Comparing results<a class="headerlink" href="#Comparing-results" title="Permalink to this heading">¶</a></h2>
<p>The function <code class="docutils literal notranslate"><span class="pre">compare</span></code> can be used to compare the results of multiple models, possibly with different variables, estimators and/or instruments. Usually a dictionary or <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> is used to hold results since the keys are used as model names. The advantage of an <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> is that it will preserve the order of the models in the presentation.</p>
<p>With the expectation of the OLS estimate, the parameter estimates are fairly consistent. Standard errors vary slightly although the conclusions reached are not sensitive to the choice of covariance estimator either. T-stats are reported in parentheses.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[14]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="kn">from</span> <span class="nn">linearmodels.iv.results</span> <span class="kn">import</span> <span class="n">compare</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;OLS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_ols</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;2SLS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_2sls</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;2SLS-Homo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_2sls_std</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;2SLS-Hetero&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_2sls_robust</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;GMM&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_gmm</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;GMM Cluster(Age)&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_gmm_clustered</span>
<span class="n">res</span><span class="p">[</span><span class="s2">&quot;GMM-CUE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_gmm_cue</span>
<span class="nb">print</span><span class="p">(</span><span class="n">compare</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                                                     Model Comparison
==========================================================================================================================
                               OLS          2SLS      2SLS-Homo   2SLS-Hetero           GMM GMM Cluster(Age)       GMM-CUE
--------------------------------------------------------------------------------------------------------------------------
Dep. Variable             ldrugexp      ldrugexp       ldrugexp      ldrugexp      ldrugexp         ldrugexp      ldrugexp
Estimator                      OLS       IV-2SLS        IV-2SLS       IV-2SLS        IV-GMM           IV-GMM        IV-GMM
No. Observations             10089         10089          10089         10089         10089            10089         10089
Cov. Est.                   robust        robust     unadjusted        robust        robust        clustered        robust
R-squared                   0.1770        0.0640         0.0414        0.0414        0.0406           0.0292        0.0388
Adj. R-squared              0.1765        0.0634         0.0409        0.0409        0.0400           0.0286        0.0382
F-statistic                 2262.6        2000.9         1882.3        1955.4        1952.6           1700.8        1949.2
P-value (F-stat)            0.0000        0.0000         0.0000        0.0000        0.0000           0.0000        0.0000
==================     ===========   ===========   ============   ===========   ===========      ===========   ===========
hi_empunion                 0.0739       -0.8976        -0.9899       -0.9899       -0.9933          -1.0359       -1.0002
                          (2.8441)     (-4.0592)      (-5.1501)     (-4.8386)     (-4.8530)        (-5.0683)     (-4.8810)
const                       5.8611        6.7872         6.8752        6.8752        6.8778           6.7277        6.8847
                          (37.320)      (25.246)       (28.030)      (26.660)      (26.658)         (13.299)      (26.657)
totchr                      0.4404        0.4503         0.4512        0.4512        0.4510           0.4482        0.4510
                          (47.049)      (44.157)       (42.942)      (43.769)      (43.738)         (33.833)      (43.701)
female                      0.0578       -0.0204        -0.0278       -0.0278       -0.0282          -0.0245       -0.0288
                          (2.2797)     (-0.6257)      (-0.8933)     (-0.8653)     (-0.8752)        (-0.8398)     (-0.8928)
age                        -0.0035       -0.0132        -0.0141       -0.0141       -0.0142          -0.0119       -0.0142
                         (-1.8228)     (-4.4092)      (-5.0834)     (-4.8753)     (-4.8773)        (-1.8928)     (-4.8969)
linc                        0.0105        0.0870         0.0943        0.0943        0.0945           0.0957        0.0950
                          (0.7646)      (3.8436)       (4.4400)      (4.3079)      (4.3142)         (6.4934)      (4.3333)
blhisp                     -0.1513       -0.2174        -0.2237       -0.2237       -0.2231          -0.2091       -0.2236
                         (-4.4353)     (-5.5052)      (-5.7805)     (-5.6514)     (-5.6344)        (-4.1662)     (-5.6421)
==================== ============= ============= ============== ============= =============    ============= =============
Instruments                             ssiratio       ssiratio      ssiratio      ssiratio         ssiratio      ssiratio
                                                         multlc        multlc        multlc           multlc        multlc
--------------------------------------------------------------------------------------------------------------------------

T-stats reported in parentheses
</pre></div></div>
</div>
<h2 id="Testing-endogeneity">Testing endogeneity<a class="headerlink" href="#Testing-endogeneity" title="Permalink to this heading">¶</a></h2>
<p>The Durbin test is a classic of endogeneity which compares OLS estimates with 2SLS and exploits the fact that OLS estimates will be relatively efficient. Durbin”s test is not robust to heteroskedasticity.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[15]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">res_2sls</span><span class="o">.</span><span class="n">durbin</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[15]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Durbin test of exogeneity
H0: All endogenous variables are exogenous
Statistic: 25.2819
P-value: 0.0000
Distributed: chi2(1)
WaldTestStatistic, id: 0x7f38d43a7100
</pre></div></div>
</div>
<p>The Wu-Hausman test is a variant of the Durbin test that uses a slightly different form.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[16]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">res_2sls</span><span class="o">.</span><span class="n">wu_hausman</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[16]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Wu-Hausman test of exogeneity
H0: All endogenous variables are exogenous
Statistic: 25.3253
P-value: 0.0000
Distributed: F(1,10081)
WaldTestStatistic, id: 0x7f38d43a75e0
</pre></div></div>
</div>
<p>The test statistic can be directly replicated using the squared t-stat in a 2-stage approach where the first stage regresses the endogenous variable on the controls and instrument and the second stage regresses the dependent variable on the controls, the endogenous regressor and the residuals. If the regressor was in fact exogenous, the residuals should not be correlated with the dependent variable.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[17]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">step1</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;ssiratio&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">controls</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">resids</span> <span class="o">=</span> <span class="n">step1</span><span class="o">.</span><span class="n">resids</span>
<span class="n">exog</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">data</span><span class="p">[[</span><span class="s2">&quot;hi_empunion&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">controls</span><span class="p">],</span> <span class="n">resids</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">step2</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">exog</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;unadjusted&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">step2</span><span class="o">.</span><span class="n">tstats</span><span class="o">.</span><span class="n">residual</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
25.34541049978904
</pre></div></div>
</div>
<p>Wooldridge”s regression-based test of exogeneity is robust to heteroskedasticity since it inherits the covariance estimator from the model. Here there is little difference.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[18]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">res_2sls</span><span class="o">.</span><span class="n">wooldridge_regression</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[18]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Wooldridge&#39;s regression test of exogeneity
H0: Endogenous variables are exogenous
Statistic: 26.4542
P-value: 0.0000
Distributed: chi2(1)
WaldTestStatistic, id: 0x7f38d3bef070
</pre></div></div>
</div>
<p>Wooldridge”s score test is an alternative to the regression test, although it usually has slightly less power since it is an LM rather than a Wald type test.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[19]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">res_2sls</span><span class="o">.</span><span class="n">wooldridge_score</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[19]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Wooldridge&#39;s score test of exogeneity
H0: Endogenous variables are exogenous
Statistic: 24.9350
P-value: 0.0000
Distributed: chi2(1)
WaldTestStatistic, id: 0x7f38d3beefe0
</pre></div></div>
</div>
<h3 id="Exogeneity-Testing">Exogeneity Testing<a class="headerlink" href="#Exogeneity-Testing" title="Permalink to this heading">¶</a></h3>
<p>When there is more than one instrument (the model is overidentified), the J test can be used in GMM models to test whether the model is overidentified – in other words, whether the instruments are actually exogenous (assuming they are relevant). In the case with 2 instruments there is no evidence that against the null.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[20]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">res_gmm</span><span class="o">.</span><span class="n">j_stat</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[20]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
H0: Expected moment conditions are equal to 0
Statistic: 1.0475
P-value: 0.3061
Distributed: chi2(1)
WaldTestStatistic, id: 0x7f38d40cb2b0
</pre></div></div>
</div>
<p>When all instruments are included the story changes, and some of the additional instrument (<code class="docutils literal notranslate"><span class="pre">lowincome</span></code> or <code class="docutils literal notranslate"><span class="pre">firmsz</span></code>) appear to be endogenous.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[21]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IVGMM</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">instruments</span><span class="p">])</span>
<span class="n">res_gmm_all</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">res_gmm_all</span><span class="o">.</span><span class="n">j_stat</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[21]:
</code></pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
H0: Expected moment conditions are equal to 0
Statistic: 11.5903
P-value: 0.0089
Distributed: chi2(3)
WaldTestStatistic, id: 0x7f38d3825a50
</pre></div></div>
</div>
<h2 id="Single-Instrument-Regressions">Single Instrument Regressions<a class="headerlink" href="#Single-Instrument-Regressions" title="Permalink to this heading">¶</a></h2>
<p>It can be useful to run the just identified regressions to see how the IV estimate varies by instrument. The OLS model is included for comparison. The coefficient when using <code class="docutils literal notranslate"><span class="pre">lowincome</span></code> is very similar to the OLS as is the <span class="math notranslate nohighlight">\(R^2\)</span> which indicates this variable may be endogenous. The coefficient using <code class="docutils literal notranslate"><span class="pre">firmsz</span></code> is also very different, but this is probably due to the low correlation between <code class="docutils literal notranslate"><span class="pre">firmsz</span></code> and the endogenous regressor so that this is a weak instrument.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[22]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">od</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">instruments</span><span class="p">:</span>
    <span class="n">od</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">])</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
        <span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;robust&quot;</span>
    <span class="p">)</span>
<span class="n">od</span><span class="p">[</span><span class="s2">&quot;OLS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_ols</span>
<span class="nb">print</span><span class="p">(</span><span class="n">compare</span><span class="p">(</span><span class="n">od</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                                     Model Comparison
==========================================================================================
                          ssiratio     lowincome        multlc        firmsz           OLS
------------------------------------------------------------------------------------------
Dep. Variable             ldrugexp      ldrugexp      ldrugexp      ldrugexp      ldrugexp
Estimator                  IV-2SLS       IV-2SLS       IV-2SLS       IV-2SLS           OLS
No. Observations             10089         10089         10089         10089         10089
Cov. Est.                   robust        robust        robust        robust        robust
R-squared                   0.0640        0.1768       -0.0644       -0.9053        0.1770
Adj. R-squared              0.0634        0.1763       -0.0651       -0.9064        0.1765
F-statistic                 2000.9        2250.6        1734.1        950.64        2262.6
P-value (F-stat)            0.0000        0.0000        0.0000        0.0000        0.0000
==================     ===========   ===========   ===========   ===========   ===========
const                       6.7872        5.8201        7.2145        8.7267        5.8611
                          (25.246)      (15.267)      (16.326)      (6.4196)      (37.320)
totchr                      0.4503        0.4399        0.4548        0.4710        0.4404
                          (44.157)      (43.834)      (39.193)      (23.163)      (47.049)
female                     -0.0204        0.0613       -0.0565       -0.1842        0.0578
                         (-0.6257)      (1.6066)     (-1.2596)     (-1.5312)      (2.2797)
age                        -0.0132       -0.0031       -0.0177       -0.0335       -0.0035
                         (-4.4092)     (-0.7521)     (-3.7086)     (-2.3433)     (-1.8228)
linc                        0.0870        0.0071        0.1223        0.2473        0.0105
                          (3.8436)      (0.2280)      (3.2965)      (2.1876)      (0.7646)
blhisp                     -0.2174       -0.1484       -0.2479       -0.3559       -0.1513
                         (-5.5052)     (-3.5639)     (-5.0727)     (-3.2425)     (-4.4353)
hi_empunion                -0.8976        0.1170       -1.3459       -2.9323        0.0739
                         (-4.0592)      (0.3254)     (-3.1760)     (-2.0908)      (2.8441)
==================== ============= ============= ============= ============= =============
Instruments               ssiratio     lowincome        multlc        firmsz
------------------------------------------------------------------------------------------

T-stats reported in parentheses
</pre></div></div>
</div>
<h3 id="First-Stage-Diagnostics">First Stage Diagnostics<a class="headerlink" href="#First-Stage-Diagnostics" title="Permalink to this heading">¶</a></h3>
<p>First stage diagnostics are available to assess whether the instruments appear to be credible for the endogenous regressor. The Partial F-statistic is the F-statistic for all instruments once controls have been partialed out. In the case of a single instrument, it is just the squared t-stat.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[23]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">res_2sls</span><span class="o">.</span><span class="n">first_stage</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
    First Stage Estimation Results
======================================
                           hi_empunion
--------------------------------------
R-squared                       0.0761
Partial R-squared               0.0179
Shea&#39;s R-squared                0.0179
Partial F-statistic             65.806
P-value (Partial F-stat)     4.441e-16
Partial F-stat Distn           chi2(1)
========================== ===========
const                           1.0290
                              (17.705)
totchr                          0.0128
                              (3.4896)
female                         -0.0734
                             (-7.6226)
age                            -0.0086
                             (-12.184)
linc                            0.0484
                              (7.3266)
blhisp                         -0.0627
                             (-5.1084)
ssiratio                       -0.1916
                             (-8.1121)
--------------------------------------

T-stats reported in parentheses
T-stats use same covariance type as original model
</pre></div></div>
</div>
<p>The F-statistic actually has a <span class="math notranslate nohighlight">\(chi^2\)</span> distribution since it is just a Wald test that all of the coefficients are 0. This breaks the “rule-of-thumb” but it can be applied by dividing the F-stat by the number of instruments.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[24]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">instruments</span><span class="p">])</span>
<span class="n">res_2sls_all</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res_2sls_all</span><span class="o">.</span><span class="n">first_stage</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
    First Stage Estimation Results
======================================
                           hi_empunion
--------------------------------------
R-squared                       0.0821
Partial R-squared               0.0243
Shea&#39;s R-squared                0.0243
Partial F-statistic             179.47
P-value (Partial F-stat)        0.0000
Partial F-stat Distn           chi2(4)
========================== ===========
const                           0.9899
                              (16.959)
totchr                          0.0133
                              (3.6494)
female                         -0.0724
                             (-7.5497)
age                            -0.0080
                             (-11.206)
linc                            0.0410
                              (6.3552)
blhisp                         -0.0676
                             (-5.5369)
ssiratio                       -0.1690
                             (-7.3289)
lowincome                      -0.0637
                             (-5.1947)
multlc                          0.1151
                              (5.4799)
firmsz                          0.0037
                              (1.9286)
--------------------------------------

T-stats reported in parentheses
T-stats use same covariance type as original model
</pre></div></div>
</div>
<h2 id="LIML">LIML<a class="headerlink" href="#LIML" title="Permalink to this heading">¶</a></h2>
<p>The LIML estimator and related k-class estimators can be used through <code class="docutils literal notranslate"><span class="pre">IVLIML</span></code>. LIML can have better finite sample properties if the model is not strongly identified. By default the <span class="math notranslate nohighlight">\(\kappa\)</span> parameter is estimated. In this dataset it is very close to 1 and to the results for LIML are similar to 2SLS (they would be exact if <span class="math notranslate nohighlight">\(\kappa=1\)</span>).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[25]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="n">ivmod</span> <span class="o">=</span> <span class="n">IVLIML</span><span class="p">(</span>
    <span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">controls</span><span class="p">],</span> <span class="n">data</span><span class="o">.</span><span class="n">hi_empunion</span><span class="p">,</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;ssiratio&quot;</span><span class="p">,</span> <span class="s2">&quot;multlc&quot;</span><span class="p">]]</span>
<span class="p">)</span>
<span class="n">res_liml</span> <span class="o">=</span> <span class="n">ivmod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">cov_type</span><span class="o">=</span><span class="s2">&quot;robust&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">compare</span><span class="p">({</span><span class="s2">&quot;2SLS&quot;</span><span class="p">:</span> <span class="n">res_2sls_robust</span><span class="p">,</span> <span class="s2">&quot;LIML&quot;</span><span class="p">:</span> <span class="n">res_liml</span><span class="p">,</span> <span class="s2">&quot;GMM&quot;</span><span class="p">:</span> <span class="n">res_gmm</span><span class="p">}))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
                       Model Comparison
==============================================================
                              2SLS          LIML           GMM
--------------------------------------------------------------
Dep. Variable             ldrugexp      ldrugexp      ldrugexp
Estimator                  IV-2SLS       IV-LIML        IV-GMM
No. Observations             10089         10089         10089
Cov. Est.                   robust        robust        robust
R-squared                   0.0414        0.0400        0.0406
Adj. R-squared              0.0409        0.0394        0.0400
F-statistic                 1955.4        1952.3        1952.6
P-value (F-stat)            0.0000        0.0000        0.0000
==================     ===========   ===========   ===========
const                       6.8752        6.8807        6.8778
                          (26.660)      (26.577)      (26.658)
totchr                      0.4512        0.4513        0.4510
                          (43.769)      (43.730)      (43.738)
female                     -0.0278       -0.0283       -0.0282
                         (-0.8653)     (-0.8776)     (-0.8752)
age                        -0.0141       -0.0142       -0.0142
                         (-4.8753)     (-4.8781)     (-4.8773)
linc                        0.0943        0.0947        0.0945
                          (4.3079)      (4.3114)      (4.3142)
blhisp                     -0.2237       -0.2241       -0.2231
                         (-5.6514)     (-5.6531)     (-5.6344)
hi_empunion                -0.9899       -0.9957       -0.9933
                         (-4.8386)     (-4.8361)     (-4.8530)
==================== ============= ============= =============
Instruments               ssiratio      ssiratio      ssiratio
                            multlc        multlc        multlc
--------------------------------------------------------------

T-stats reported in parentheses
</pre></div></div>
</div>
<p>The estimated value of <span class="math notranslate nohighlight">\(\kappa\)</span>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[26]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">res_liml</span><span class="o">.</span><span class="n">kappa</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1.000115316680643
</pre></div></div>
</div>
<h3 id="IV2SLS-as-OLS">IV2SLS as OLS<a class="headerlink" href="#IV2SLS-as-OLS" title="Permalink to this heading">¶</a></h3>
<p>As one final check, the “OLS” version of <code class="docutils literal notranslate"><span class="pre">IV2SLS</span></code> is compared to <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> <code class="docutils literal notranslate"><span class="pre">OLS</span></code> command. The parameters are identical.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span><code>[27]:
</code></pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">ivolsmod</span> <span class="o">=</span> <span class="n">IV2SLS</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">ldrugexp</span><span class="p">,</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;hi_empunion&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">controls</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">res_ivols</span> <span class="o">=</span> <span class="n">ivolsmod</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">sm_ols</span> <span class="o">=</span> <span class="n">res_ols</span><span class="o">.</span><span class="n">params</span>
<span class="n">sm_ols</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;sm&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">res_ivols</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">sm_ols</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
             parameter        sm
hi_empunion   0.073879  0.073879
const         5.861131  5.861131
totchr        0.440381  0.440381
female        0.057806  0.057806
age          -0.003529 -0.003529
linc          0.010482  0.010482
blhisp       -0.151307 -0.151307
</pre></div></div>
</div>






                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="basic-examples.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Basic Examples" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Basic Examples
            </div>
          </div>
        </a>
      
      
        
        <a href="using-formulas.html" class="md-footer__link md-footer__link--next" aria-label="Next: Using formulas to specify models" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Using formulas to specify models
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2021, Kevin Sheppard.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    6.2.1.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/bashtage/linearmodels" target="_blank" rel="noopener" title="Source on github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://pypi.org/project/linearmodels/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://doi.org/10.5281/zenodo.2591973" target="_blank" rel="noopener" title="doi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 216C0 149.7 53.7 96 120 96h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V216zm256 0c0-66.3 53.7-120 120-120h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-64c-35.3 0-64-28.7-64-64V216z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike", "staticVersions": [{"aliases": [], "title": "Release", "version": "https://bashtage.github.io/linearmodels/"}, {"aliases": [], "title": "Development", "version": "https://bashtage.github.io/linearmodels/devel/"}], "versionPath": null}}</script>
    
      
        <script src="../../_static/sphinx_immaterial_theme.cea6a0c1d5b0618cf.min.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
  </body>
</html>